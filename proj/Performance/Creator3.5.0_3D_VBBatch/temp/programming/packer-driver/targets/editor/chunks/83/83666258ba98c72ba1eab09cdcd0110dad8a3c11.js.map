{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Performance/Creator3.5.0_3D_VBBatch/assets/script/fight/vbMaterial.ts"],"names":["_decorator","Component","Material","SkinnedMeshRenderer","ModelComponent","ccclass","property","vbMaterial","_isEnable","enableVBB","value","material","vbbMaterial","normalMaterial","skinModel","node","getComponent","len","materials","length","idx","setMaterial","model","enablevbb","start"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,mB,OAAAA,mB;AAAqBC,MAAAA,c,OAAAA,c;;;;;;;OAC/D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;4BAGjBO,U,WADZF,OAAO,CAAC,YAAD,C,UAGHC,QAAQ,CAACJ,QAAD,C,UAGRI,QAAQ,CAACJ,QAAD,C,2BANb,MACaK,UADb,SACgCN,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQtCO,SARsC,GAQ1B,KAR0B;AAAA;;AASzB,YAATC,SAAS,CAAEC,KAAF,EAAkB;AAC3B,eAAKF,SAAL,GAAiBE,KAAjB;AAEA,cAAIC,QAAQ,GAAG,KAAKH,SAAL,GAAiB,KAAKI,WAAtB,GAAoC,KAAKC,cAAxD;AACA,cAAIC,SAAS,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBb,mBAAvB,CAAhB;;AAEA,cAAIW,SAAJ,EAAe;AACX,gBAAIG,GAAG,GAAGH,SAAS,CAACI,SAAV,CAAoBC,MAA9B;;AACA,iBAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGH,GAAxB,EAA6BG,GAAG,EAAhC,EAAoC;AAChCN,cAAAA,SAAS,CAACO,WAAV,CAAsBV,QAAtB,EAAgCS,GAAhC;AACH;AACJ,WALD,MAKO;AACH,gBAAIE,KAAK,GAAG,KAAKP,IAAL,CAAUC,YAAV,CAAuBZ,cAAvB,CAAZ;;AACA,gBAAIkB,KAAJ,EAAW;AACP,kBAAIL,GAAG,GAAGK,KAAK,CAACJ,SAAN,CAAgBC,MAA1B;;AACA,mBAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGH,GAAxB,EAA6BG,GAAG,EAAhC,EAAoC;AAChCE,gBAAAA,KAAK,CAACD,WAAN,CAAkBV,QAAlB,EAA4BS,GAA5B;AACH;AACJ;AACJ;AAKJ;;AAEY,YAATG,SAAS,GAAI;AACb,iBAAO,KAAKf,SAAZ;AACH;;AAEDgB,QAAAA,KAAK,GAAI,CACL;AACH,SAzCqC,CA2CtC;AACA;AACA;;;AA7CsC,O;;;;;iBAGX,I;;;;;;;iBAGH,I","sourcesContent":["import { _decorator, Component, Node, Material, SkinnedMeshRenderer, ModelComponent } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('vbMaterial')\nexport class vbMaterial extends Component {\n\n    @property(Material)\n    normalMaterial: Material = null!;\n\n    @property(Material)\n    vbbMaterial: Material = null!;\n\n    _isEnable = false;\n    set enableVBB (value: boolean) {\n        this._isEnable = value;\n\n        let material = this._isEnable ? this.vbbMaterial : this.normalMaterial;\n        let skinModel = this.node.getComponent(SkinnedMeshRenderer);\n        \n        if (skinModel) {\n            let len = skinModel.materials.length;\n            for (let idx = 0; idx < len; idx++) {\n                skinModel.setMaterial(material, idx);\n            }    \n        } else {\n            let model = this.node.getComponent(ModelComponent);\n            if (model) {\n                let len = model.materials.length;\n                for (let idx = 0; idx < len; idx++) {\n                    model.setMaterial(material, idx);\n                }\n            }\n        }\n\n        \n        \n            \n    }\n\n    get enablevbb () {\n        return this._isEnable;\n    }\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    // update (deltaTime: number) {\n    //     // Your update function goes here.\n    // }\n}\n"]}