{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Performance/Creator3.5.0_3D_VBBatch/assets/script/ui/main/mainUI.ts"],"names":["_decorator","Component","Node","profiler","Label","SpriteFrame","Sprite","EditBox","sys","playerManager","confirmBox","constants","StorageManager","ccclass","property","LOWMODEL_KEY","SHADOW_KEY","ARRNAME_KEY","mainUI","count","curClickLogoTimes","maxClickLogoTimes","enableVBB","value","manager","spInstacing","spriteFrame","imgOn","imgOff","enableShadow","spShadow","enableLowModel","spLowModel","shareGame","title","imageUrl","window","wx","showShareMenu","withShareTicket","complete","onShareAppMessage","updateManager","getUpdateManager","onUpdateReady","showModal","content","success","res","confirm","applyUpdate","start","cocosAnalytics","init","appID","version","VERSION","storeID","engine","_stats","console","log","showStats","lbVersion","string","updateSwitch","onPeopleNumChanged","onPeopleNumberChanged","bind","instance","getGlobalData","spAliasing","enableAntiAliasing","onBtnAddClick","addPlayerGroup","onBtnResetClick","resetPlayer","onBtnReduceClick","reducePlayer","onLogoClick","addDancer","switchVBB","switchAliasing","str","nodeConfirmBox","getComponent","show","active","switchShadow","switchLowModel","setGlobalData","isBrowser","location","reload","platform","WECHAT_GAME","exitMiniProgram","isNative","__restartVM","onNumberInputEnd","num","Number","parseInt","numberInput","updatePlayerNumber","onNumberClick","evt","data","toString","update","deltaTime","lbFps","Math","round","fps","counter","lbDrawcall","draws","lbInstancing","instances","lbTriangle","tricount","lbGFXMem","textureMemory","toFixed","lbGameLogic","logic","lbArtTriangle","artTriangle","lbVertex","artVertex","lbPeople","people","onDestroy","_rootNode"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, profiler, Label, SpriteFrame, Sprite, EditBox, EventTouch, sys } from 'cc';\nimport { playerManager } from '../../fight/playerManager';\nimport { confirmBox } from './confirmBox';\nimport { constants } from '../../framework/util/constants';\nimport { StorageManager } from '../../framework/config/storageManager';\nconst { ccclass, property } = _decorator;\n\nconst LOWMODEL_KEY = 'low-model';\nconst SHADOW_KEY = 'shadow';\nconst ARRNAME_KEY = 'arrName';\n\n@ccclass('mainUI')\nexport class mainUI extends Component {\n    @property (playerManager)\n    manager: playerManager = null!; \n\n    @property (Label)\n    lbFps: Label = null!;\n\n    @property (Label)\n    lbDrawcall: Label = null!;\n\n    @property (Label)\n    lbInstancing: Label = null!;\n\n    @property (Label)\n    lbTriangle: Label = null!;\n\n    @property (Label)\n    lbGFXMem: Label = null!;\n\n    @property (Label)\n    lbGameLogic: Label = null!;\n\n    @property (Label)\n    lbArtTriangle: Label = null!;\n\n    @property (Label)\n    lbVertex: Label = null!;\n\n    @property (Label)\n    lbPeople: Label = null!;\n\n    @property (SpriteFrame)\n    imgOn: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    imgOff: SpriteFrame = null!;\n\n    @property(Sprite)\n    spInstacing: Sprite = null!;\n\n    @property(Sprite)\n    spShadow: Sprite = null!;\n\n    @property(Sprite)\n    spAliasing: Sprite = null!;\n\n    @property(Sprite)\n    spLowModel: Sprite = null!;\n\n    @property(Node)\n    nodeConfirmBox: Node = null!;\n\n    @property(Label)\n    lbVersion: Label = null!;\n    \n    @property(EditBox)\n    numberInput: EditBox = null!;\n\n    count: number = 0;\n    curClickLogoTimes: number = 0;\n    maxClickLogoTimes: number = 3;\n\n    set enableVBB (value: boolean) {\n        this.manager.enableVBB = value;\n\n        this.spInstacing.spriteFrame = value ? this.imgOn : this.imgOff;\n    }\n\n    get enableVBB () {\n        return this.manager.enableVBB;\n    }\n\n    set enableShadow (value: boolean) {\n        this.manager.enableShadow = value;\n\n        this.spShadow.spriteFrame = value ? this.imgOn : this.imgOff;\n    }\n\n    get enableShadow () {\n        return this.manager.enableShadow;\n    }\n\n    set enableLowModel (value: boolean) {\n        this.manager.enableLowModel = value;\n\n        this.spLowModel.spriteFrame = value ? this.imgOn : this.imgOff;\n    }\n\n    get enableLowModel () {\n        return this.manager.enableLowModel;\n    }\n\n    shareGame (title: string, imageUrl: string) {\n        // @ts-ignore\n        if (!window.wx) {\n            return;\n        }\n\n        // @ts-ignore\n        window.wx.showShareMenu({\n            withShareTicket: true,\n            complete: ()=>{\n\n            }\n        });\n\n        // @ts-ignore\n        window.wx.onShareAppMessage(function () {\n            // 用户点击了“转发”按钮\n            return {\n                title: title,\n                imageUrl: imageUrl,\n                \n            };\n        });\n        \n        // @ts-ignore\n        var updateManager = window['wx'].getUpdateManager();\n        updateManager.onUpdateReady(()=>{\n            // @ts-ignore\n            window['wx'].showModal({\n                title: '温馨提示',\n                content: '新的版本已经准备好, 请重新启动',\n                success: (res: any)=>{\n                    if (res.confirm) {\n                        updateManager.applyUpdate();\n                    }\n                }\n            })\n        })\n    }\n\n    start () {\n        // @ts-ignore\n        if (window.cocosAnalytics) {\n            // @ts-ignore\n            window.cocosAnalytics.init({\n                appID: \"697959573\",              // 游戏ID\n                version: constants.VERSION,           // 游戏/应用版本号\n                storeID: \"wechat\",     // 分发渠道\n                engine: \"cocos\",            // 游戏引擎\n            });\n        }\n\n        // Your initialization goes here.\n\n        this.shareGame(\"更多精彩游戏等你来发现！\", \"https://res.592you.com/game-shares/cake/imgs/40.jpg\");\n\n        if (!profiler._stats) {\n            console.log('showStats');\n            profiler.showStats();\n        }\n\n        //@ts-ignore\n        // if (profiler._rootNode) {\n        //     //@ts-ignore\n        //     profiler._rootNode.active = false;\n        // }\n        \n        this.lbVersion.string = 'Version: ' + constants.VERSION;\n\n        this.updateSwitch();\n\n        if (this.manager) {\n            this.manager.onPeopleNumChanged = this.onPeopleNumberChanged.bind(this);\n        }\n\n        StorageManager.instance.start();\n\n        this.enableLowModel = StorageManager.instance.getGlobalData(LOWMODEL_KEY) || false;\n        this.manager.enableLowModel = this.enableLowModel;\n        this.enableShadow = StorageManager.instance.getGlobalData(SHADOW_KEY);\n    }\n\n    updateSwitch () {\n        this.spShadow.spriteFrame = this.enableShadow ? this.imgOn : this.imgOff;\n\n        this.spInstacing.spriteFrame = this.enableVBB ? this.imgOn : this.imgOff;\n\n        this.spAliasing.spriteFrame = this.manager.enableAntiAliasing ? this.imgOn : this.imgOff;\n    }\n\n    onBtnAddClick () {\n        this.manager.addPlayerGroup();\n    }\n\n    onBtnResetClick () {\n        this.manager.resetPlayer();\n        this.curClickLogoTimes = 0;\n    }\n\n    onBtnReduceClick () {\n        //减人\n        this.manager.reducePlayer();\n    }\n\n    onLogoClick () {\n        this.curClickLogoTimes += 1;\n        if (this.curClickLogoTimes === this.maxClickLogoTimes) {\n            this.manager.addDancer();\n        }\n    }\n\n    switchVBB () {\n        this.enableVBB = !this.enableVBB;\n    }\n\n    switchAliasing () {\n        //跳出提示框\n        let str = this.manager.enableAntiAliasing ? '关闭' : '开启';\n\n        this.nodeConfirmBox.getComponent(confirmBox)!.show(`${str}抗锯齿需要重启游戏`, ()=>{\n            this.manager.enableAntiAliasing = !this.manager.enableAntiAliasing;\n        }, ()=>{\n\n        });\n\n        this.nodeConfirmBox.active = true;\n    }\n\n    switchShadow () {\n        this.enableShadow = !this.enableShadow;\n    }\n\n    switchLowModel () {\n        this.enableLowModel = !this.enableLowModel;\n\n        StorageManager.instance.setGlobalData(LOWMODEL_KEY, this.enableLowModel);\n        if (this.enableLowModel) {\n            StorageManager.instance.setGlobalData(ARRNAME_KEY, [\"altman\", \"clown\", \"soldier\"]);\n        } else {\n            StorageManager.instance.setGlobalData(ARRNAME_KEY, [\"altman\", \"clown\", \"cocosWalk\", \"kulou\", \"shitouWalk\", \"soldier\"]);\n        }\n        StorageManager.instance.setGlobalData(SHADOW_KEY, this.enableShadow);\n\n        if (sys.isBrowser) {\n            window.location.reload();\n        } else if (sys.platform === sys.WECHAT_GAME) {\n            console.log('reload!');\n            // @ts-ignore\n            window.wx.exitMiniProgram({\n                complete: ()=>{\n                    \n                }\n            });\n        } else if (sys.isNative) {\n            // @ts-ignore\n            window.__restartVM();\n        }\n    }\n\n    onNumberInputEnd() {\n        const num = Number.parseInt(this.numberInput.string);\n        this.manager.updatePlayerNumber(num);\n    }\n\n    onNumberClick (evt: EventTouch, data: string) {\n        const num = Number.parseInt(data);\n        this.manager.updatePlayerNumber(num);\n    }\n\n    onPeopleNumberChanged(num: number) {\n        if (this.numberInput) {\n            this.numberInput.string = num.toString();\n        }\n    }\n\n    update (deltaTime: number) {\n        // Your update function goes here.\n        this.count++;\n        if (this.count > 10 && profiler._stats) {\n            this.count = 0;\n\n            //fps\n            this.lbFps.string = Math.round(profiler._stats.fps.counter.value).toString();\n            \n            //drawcall\n            this.lbDrawcall.string = profiler._stats.draws.counter.value.toString();\n            this.lbInstancing.string = profiler._stats.instances.counter.value.toString();\n            this.lbTriangle.string = profiler._stats.tricount.counter.value.toString();\n            this.lbGFXMem.string = profiler._stats.textureMemory.counter.value.toFixed(1).toString();\n            this.lbGameLogic.string = profiler._stats.logic.counter.value.toFixed(2).toString();\n            this.lbArtTriangle.string = this.manager.artTriangle.toString();\n            this.lbVertex.string = this.manager.artVertex.toString();\n            this.lbPeople.string = this.manager.people.toString();\n        }\n    }\n\n    onDestroy() {\n        // @ts-ignore\n        if (profiler._rootNode) {\n            // @ts-ignore\n            profiler._rootNode.active = true;\n        }\n    }\n}\n"]}