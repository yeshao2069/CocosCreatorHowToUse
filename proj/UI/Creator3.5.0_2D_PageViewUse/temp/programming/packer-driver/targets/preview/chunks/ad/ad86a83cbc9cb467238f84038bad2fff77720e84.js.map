{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/UI/Creator3.5.0_2D_PageViewUse/assets/script/PageViewCtl.ts"],"names":["_decorator","Component","CCFloat","Prefab","PageView","Label","instantiate","Vec3","Color","Sprite","ccclass","property","PageViewCtl","_createPage","page","pageTemple","setPosition","color","r","Math","floor","random","g","b","getComponent","onLoad","target","setCurrentPageIndex","update","label","string","getCurrentPageIndex","onJumpHome","scrollToPage","plusPage","callback","curNum","curTotal","lessPageNum","onAddPage","addPage","onInsertPage","insertPage","onRemovePage","pages","getPages","removePage","length","onRemovePageAtIndex","removePageAtIndex","onRemoveAllPage","removeAllPages","onPageEvent","sender","eventType","EventType","PAGE_TURNING","console","log"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, CCFloat, Prefab, PageView,\n    Label, instantiate, Vec3, Color, Sprite } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PageViewCtl')\nexport class PageViewCtl extends Component {\n    \n    @property(CCFloat)\n    curNum : number = 3;\n    @property(CCFloat)\n    curTotal : number = 10;\n    @property(Prefab)\n    pageTemple !: Prefab;\n    @property(PageView)\n    target !: PageView;\n    @property(Label)\n    label !: Label;\n\n    _createPage () {\n        var page = instantiate(this.pageTemple);\n        page.setPosition(new Vec3());\n        var color = new Color();\n        color.r = Math.floor(Math.random() * 255);\n        color.g = Math.floor(Math.random() * 255);\n        color.b = Math.floor(Math.random() * 255);\n        page.getComponent(Sprite)!.color = color;\n        return page;\n    }\n\n    onLoad () {\n        // 设置的当前页面为 1\n        this.target.setCurrentPageIndex(0);\n    }\n\n    update () {\n        // 当前页面索引\n        this.label.string = \"第\" + (this.target.getCurrentPageIndex() + 1) + \"页\";\n    }\n\n    // 返回首页\n    onJumpHome () {\n        // 第二个参数为滚动所需时间，默认值为 0.3 秒\n        this.target.scrollToPage(0);\n    }\n\n    // 添加页面\n    plusPage (callback: any) {\n        if (this.curNum > this.curTotal) {\n            return;\n        }\n        this.curNum++;\n        if (callback) {\n            callback();\n        }\n    }\n\n    // 减少页面\n    lessPageNum (callback: any) {\n        if (this.curNum <= 0) {\n            return;\n        }\n        this.curNum--;\n        if (callback) {\n            callback();\n        }\n    }\n\n    // 添加页面\n    onAddPage () {\n        this.plusPage(() => {\n            this.target.addPage(this._createPage());\n        });\n    }\n\n    // 插入当前页面\n    onInsertPage () {\n        this.plusPage(() => {\n            this.target.insertPage(this._createPage(), this.target.getCurrentPageIndex());\n        });\n    }\n\n    // 移除最后一个页面\n    onRemovePage () {\n        this.lessPageNum(() => {\n            var pages = this.target.getPages();\n            this.target.removePage(pages[pages.length - 1]);\n        });\n    }\n\n    // 移除当前页面\n    onRemovePageAtIndex () {\n        this.lessPageNum(() => {\n            this.target.removePageAtIndex(this.target.getCurrentPageIndex());\n        });\n    }\n\n    // 移除所有页面\n    onRemoveAllPage () {\n        this.target.removeAllPages();\n        this.curNum = 0;\n    }\n\n    // 监听事件\n    onPageEvent (sender: any, eventType: any) {\n        // 翻页事件\n        if (eventType !== PageView.EventType.PAGE_TURNING) {\n            return;\n        }\n        console.log(\"当前所在的页面索引:\" + sender.getCurrentPageIndex());\n    }\n}\n"]}