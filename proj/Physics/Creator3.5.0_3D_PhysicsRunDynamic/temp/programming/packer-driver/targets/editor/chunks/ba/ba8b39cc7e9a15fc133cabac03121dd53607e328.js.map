{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Physics/Creator3.5.0_3D_PhysicsRunDynamic/assets/script/AxisHelper.ts"],"names":["_decorator","Component","Prefab","instantiate","resources","ccclass","property","AxisHelper","_ins","__preload","_axis","load","args","console","error","_insArr","forEach","v","enabled","enabledInHierarchy","node","active","activeInHierarchy","onEnable","onLoad","push","addChild","onDisable","onDestroy","index","indexOf","splice"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;;;;;;;OACrD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;4BAGjBO,U,WADZF,OAAO,CAAC,YAAD,C,2BAAR,MACaE,UADb,SACgCN,SADhC,CAC0C;AAAA;AAAA;AAAA,eAI9BO,IAJ8B,GAIjB,IAJiB;AAAA;;AAMtCC,QAAAA,SAAS,GAAI;AACT,cAAIF,UAAU,CAACG,KAAX,IAAoB,IAAxB,EAA8B;AAC1BN,YAAAA,SAAS,CAACO,IAAV,CAAe,aAAf,EAA8BT,MAA9B,EAAsC,CAAC,GAAGU,IAAJ,KAAa;AAC/C,kBAAIA,IAAJ,EAAU;AACN,oBAAIA,IAAI,CAAC,CAAD,CAAR,EAAa;AACTC,kBAAAA,OAAO,CAACC,KAAR,CAAcF,IAAI,CAAC,CAAD,CAAlB;AACH,iBAFD,MAEO;AACHL,kBAAAA,UAAU,CAACG,KAAX,GAAmBE,IAAI,CAAC,CAAD,CAAvB;;AACAL,kBAAAA,UAAU,CAACQ,OAAX,CAAmBC,OAAnB,CAA4BC,CAAD,IAAmB;AAC1C,wBAAI,CAACA,CAAC,CAACT,IAAH,IAAWS,CAAC,CAACC,OAAb,IAAwBD,CAAC,CAACE,kBAA1B,IAAgDF,CAAC,CAACG,IAAF,CAAOC,MAAvD,IAAiEJ,CAAC,CAACG,IAAF,CAAOE,iBAA5E,EAA+FL,CAAC,CAACM,QAAF;AAClG,mBAFD;AAGH;AACJ;AACJ,aAXD;AAYH;AACJ;;AAEDC,QAAAA,MAAM,GAAI;AACNjB,UAAAA,UAAU,CAACQ,OAAX,CAAmBU,IAAnB,CAAwB,IAAxB;AACH;;AAEDF,QAAAA,QAAQ,GAAI;AACR,cAAIhB,UAAU,CAACG,KAAf,EAAsB;AAClB,gBAAI,KAAKF,IAAL,IAAa,IAAjB,EAAuB;AACnB,mBAAKA,IAAL,GAAYL,WAAW,CAACI,UAAU,CAACG,KAAZ,CAAvB;AACA,mBAAKU,IAAL,CAAUM,QAAV,CAAmB,KAAKlB,IAAxB;AACH;;AACD,iBAAKA,IAAL,CAAUa,MAAV,GAAmB,IAAnB;AACH;AACJ;;AAEDM,QAAAA,SAAS,GAAI;AACT,cAAI,KAAKnB,IAAT,EAAe,KAAKA,IAAL,CAAUa,MAAV,GAAmB,KAAnB;AAClB;;AAEDO,QAAAA,SAAS,GAAI;AACT,gBAAMC,KAAK,GAAGtB,UAAU,CAACQ,OAAX,CAAmBe,OAAnB,CAA2B,IAA3B,CAAd;;AACA,cAAID,KAAK,IAAI,CAAb,EAAgB;AACZtB,YAAAA,UAAU,CAACQ,OAAX,CAAmBgB,MAAnB,CAA0BF,KAA1B,EAAiC,CAAjC;AACH;AACJ;;AA9CqC,O,UAEvBnB,K,GAAgB,I,UAChBK,O,GAAwB,E","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate, resources } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('AxisHelper')\nexport class AxisHelper extends Component {\n\n    private static _axis: Prefab = null as any;\n    private static _insArr: AxisHelper[] = [];\n    private _ins: Node = null as any;\n\n    __preload () {\n        if (AxisHelper._axis == null) {\n            resources.load('common/Axis', Prefab, (...args) => {\n                if (args) {\n                    if (args[0]) {\n                        console.error(args[0]);\n                    } else {\n                        AxisHelper._axis = args[1] as Prefab;\n                        AxisHelper._insArr.forEach((v: AxisHelper) => {\n                            if (!v._ins && v.enabled && v.enabledInHierarchy && v.node.active && v.node.activeInHierarchy) v.onEnable();\n                        })\n                    }\n                }\n            });\n        }\n    }\n\n    onLoad () {\n        AxisHelper._insArr.push(this);\n    }\n\n    onEnable () {\n        if (AxisHelper._axis) {\n            if (this._ins == null) {\n                this._ins = instantiate(AxisHelper._axis);\n                this.node.addChild(this._ins);\n            }\n            this._ins.active = true;\n        }\n    }\n\n    onDisable () {\n        if (this._ins) this._ins.active = false;\n    }\n\n    onDestroy () {\n        const index = AxisHelper._insArr.indexOf(this);\n        if (index >= 0) {\n            AxisHelper._insArr.splice(index, 1);\n        }\n    }\n}"]}