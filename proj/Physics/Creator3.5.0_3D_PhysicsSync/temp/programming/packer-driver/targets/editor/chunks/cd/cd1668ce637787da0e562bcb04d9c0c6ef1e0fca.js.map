{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Physics/Creator3.5.0_3D_PhysicsSync/assets/script/PhysicsEnvCheck.ts"],"names":["_decorator","Component","Label","Sprite","Enum","PhysicsSystem","ccclass","property","EPhysicsItem","BUILTIN","AMMO","CANNON","PhysicsEnvCheck","physics","CANNON_AMMO","onLoad","PHYSICS_BUILTIN","lbCom","node","getChildByName","getComponent","string","PHYSICS_CANNON","PHYSICS_AMMO","PHYSICS_PHYSX","name","ALL","BUILTIN_AMMO","enabled","sprCom","getComponentInChildren","lbCom1","sprCom1"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;;;;;;;OACrD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;iBAEzBQ,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y;AAAAA,QAAAA,Y,CAAAA,Y,mBAIcA,YAAY,CAACC,OAAb,GAAuBD,YAAY,CAACE,I;AAJlDF,QAAAA,Y,CAAAA,Y,kBAKaA,YAAY,CAACG,MAAb,GAAsBH,YAAY,CAACE,I;AALhDF,QAAAA,Y,CAAAA,Y;SAAAA,Y,KAAAA,Y;;AAQLJ,MAAAA,IAAI,CAACI,YAAD,CAAJ;;iCAGaI,e,WADZN,OAAO,CAAC,iBAAD,C,gBAAR,MACaM,eADb,SACqCX,SADrC,CAC+C;AAAA;AAAA;AAAA,eAG3CY,OAH2C,GAGnBL,YAAY,CAACM,WAHM;AAAA;;AAK3CC,QAAAA,MAAM,GAAI;AAEN,cAAIV,aAAa,CAACW,eAAlB,EAAmC;AAC/B,kBAAMC,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAkCC,YAAlC,CAA+ClB,KAA/C,CAAd;AACAe,YAAAA,KAAK,CAACI,MAAN,GAAe,cAAf;AACH,WAHD,MAGO,IAAIhB,aAAa,CAACiB,cAAlB,EAAkC;AACrC,kBAAML,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAkCC,YAAlC,CAA+ClB,KAA/C,CAAd;AACAe,YAAAA,KAAK,CAACI,MAAN,GAAe,gBAAf;AACH,WAHM,MAGA,IAAIhB,aAAa,CAACkB,YAAlB,EAAgC;AACnC,kBAAMN,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAkCC,YAAlC,CAA+ClB,KAA/C,CAAd;AACAe,YAAAA,KAAK,CAACI,MAAN,GAAe,cAAf;AACH,WAHM,MAGA,IAAIhB,aAAa,CAACmB,aAAlB,EAAiC;AACpC,kBAAMP,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAkCC,YAAlC,CAA+ClB,KAA/C,CAAd;AACAe,YAAAA,KAAK,CAACI,MAAN,GAAe,YAAf;AACH,WAHM,MAGA;AACH,kBAAMJ,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAkCC,YAAlC,CAA+ClB,KAA/C,CAAd;AACAe,YAAAA,KAAK,CAACI,MAAN,GAAe,WAAf;AACH;;AAED,gBAAMI,IAAI,GAAG,KAAKP,IAAL,CAAUO,IAAvB;;AACA,cAAIA,IAAI,IAAI,aAAZ,EAA2B;AACvB,iBAAKZ,OAAL,GAAeL,YAAY,CAACM,WAA5B;AACH,WAFD,MAEO,IAAIW,IAAI,IAAI,SAAZ,EAAuB;AAC1B,iBAAKZ,OAAL,GAAeL,YAAY,CAACC,OAA5B;AACH,WAFM,MAEA,IAAIgB,IAAI,IAAI,QAAZ,EAAsB;AACzB,iBAAKZ,OAAL,GAAeL,YAAY,CAACG,MAA5B;AACH,WAFM,MAEA,IAAIc,IAAI,IAAI,MAAZ,EAAoB;AACvB,iBAAKZ,OAAL,GAAeL,YAAY,CAACE,IAA5B;AACH,WAFM,MAEA,IAAIe,IAAI,IAAI,qBAAZ,EAAmC;AACtC,iBAAKZ,OAAL,GAAeL,YAAY,CAACkB,GAA5B;AACH,WAFM,MAEA,IAAID,IAAI,IAAI,cAAZ,EAA4B;AAC/B,iBAAKZ,OAAL,GAAeL,YAAY,CAACmB,YAA5B;AACH;;AAED,kBAAQ,KAAKd,OAAb;AACI,iBAAKL,YAAY,CAACkB,GAAlB;AACI;;AACJ,iBAAKlB,YAAY,CAACM,WAAlB;AACI,kBAAIT,aAAa,CAACiB,cAAd,IAAgCjB,aAAa,CAACkB,YAAlD,EAAgE;AAC5D;AACH;;AAED,kBAAIN,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAAgCC,YAAhC,CAA6ClB,KAA7C,CAAZ;AACAe,cAAAA,KAAK,CAACW,OAAN,GAAgB,IAAhB;AACAX,cAAAA,KAAK,CAACI,MAAN,GAAe,qCAAf;AACA,kBAAIQ,MAAM,GAAG,KAAKC,sBAAL,CAA4B3B,MAA5B,CAAb;AACA0B,cAAAA,MAAM,CAACD,OAAP,GAAiB,IAAjB;AACA;;AAEJ,iBAAKpB,YAAY,CAACmB,YAAlB;AACI,kBAAItB,aAAa,CAACW,eAAd,IAAiCX,aAAa,CAACkB,YAAnD,EAAiE;AAC7D;AACH;;AAED,kBAAIQ,MAAM,GAAG,KAAKb,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAAgCC,YAAhC,CAA6ClB,KAA7C,CAAb;AACA6B,cAAAA,MAAM,CAACH,OAAP,GAAiB,IAAjB;AACAG,cAAAA,MAAM,CAACV,MAAP,GAAgB,mCAAhB;AACA,kBAAIW,OAAO,GAAG,KAAKF,sBAAL,CAA4B3B,MAA5B,CAAd;AACA6B,cAAAA,OAAO,CAACJ,OAAR,GAAkB,IAAlB;AACA;;AAEJ,iBAAKpB,YAAY,CAACG,MAAlB;AACI,kBAAI,CAACN,aAAa,CAACiB,cAAnB,EAAmC;AAC/B,oBAAIL,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAAgCC,YAAhC,CAA6ClB,KAA7C,CAAZ;AACAe,gBAAAA,KAAK,CAACW,OAAN,GAAgB,IAAhB;AACAX,gBAAAA,KAAK,CAACI,MAAN,GAAe,2BAAf;AACA,oBAAIQ,MAAM,GAAG,KAAKC,sBAAL,CAA4B3B,MAA5B,CAAb;AACA0B,gBAAAA,MAAM,CAACD,OAAP,GAAiB,IAAjB;AACH;;AACD;;AACJ,iBAAKpB,YAAY,CAACE,IAAlB;AACI,kBAAI,CAACL,aAAa,CAACkB,YAAnB,EAAiC;AAC7B,oBAAIN,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAAgCC,YAAhC,CAA6ClB,KAA7C,CAAZ;AACAe,gBAAAA,KAAK,CAACW,OAAN,GAAgB,IAAhB;AACAX,gBAAAA,KAAK,CAACI,MAAN,GAAe,yBAAf;AACA,oBAAIQ,MAAM,GAAG,KAAKC,sBAAL,CAA4B3B,MAA5B,CAAb;AACA0B,gBAAAA,MAAM,CAACD,OAAP,GAAiB,IAAjB;AACH;;AACD;;AACJ,iBAAKpB,YAAY,CAACC,OAAlB;AACI,kBAAI,CAACJ,aAAa,CAACW,eAAnB,EAAoC;AAChC,oBAAIC,KAAK,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAAgCC,YAAhC,CAA6ClB,KAA7C,CAAZ;AACAe,gBAAAA,KAAK,CAACW,OAAN,GAAgB,IAAhB;AACAX,gBAAAA,KAAK,CAACI,MAAN,GAAe,yBAAf;AACA,oBAAIQ,MAAM,GAAG,KAAKC,sBAAL,CAA4B3B,MAA5B,CAAb;AACA0B,gBAAAA,MAAM,CAACD,OAAP,GAAiB,IAAjB;AACH;;AACD;AArDR;AAuDH;;AA9F0C,O","sourcesContent":["import { _decorator, Component, Node, Label, Sprite, Enum, PhysicsSystem } from \"cc\";\nconst { ccclass, property } = _decorator;\n\nenum EPhysicsItem {\n    BUILTIN = 1 << 0,\n    CANNON = 1 << 1,\n    AMMO = 1 << 2,\n    BUILTIN_AMMO = EPhysicsItem.BUILTIN + EPhysicsItem.AMMO,\n    CANNON_AMMO = EPhysicsItem.CANNON + EPhysicsItem.AMMO,\n    ALL = -1,\n}\nEnum(EPhysicsItem);\n\n@ccclass(\"PhysicsEnvCheck\")\nexport class PhysicsEnvCheck extends Component {\n\n    // @property({ type: EPhysicsItem })\n    physics: EPhysicsItem = EPhysicsItem.CANNON_AMMO;\n\n    onLoad () {\n\n        if (PhysicsSystem.PHYSICS_BUILTIN) {\n            const lbCom = this.node.getChildByName('desc')!.getComponent(Label)!;\n            lbCom.string = \"当前物理：builtin\";\n        } else if (PhysicsSystem.PHYSICS_CANNON) {\n            const lbCom = this.node.getChildByName('desc')!.getComponent(Label)!;\n            lbCom.string = \"当前物理：cannon.js\";\n        } else if (PhysicsSystem.PHYSICS_AMMO) {\n            const lbCom = this.node.getChildByName('desc')!.getComponent(Label)!;\n            lbCom.string = \"当前物理：ammo.js\";\n        } else if (PhysicsSystem.PHYSICS_PHYSX) {\n            const lbCom = this.node.getChildByName('desc')!.getComponent(Label)!;\n            lbCom.string = \"当前物理：physx\";\n        } else {\n            const lbCom = this.node.getChildByName('desc')!.getComponent(Label)!;\n            lbCom.string = \"当前物理：none\";\n        }\n\n        const name = this.node.name;\n        if (name == \"cannon-ammo\") {\n            this.physics = EPhysicsItem.CANNON_AMMO;\n        } else if (name == \"builtin\") {\n            this.physics = EPhysicsItem.BUILTIN;\n        } else if (name == \"cannon\") {\n            this.physics = EPhysicsItem.CANNON;\n        } else if (name == \"ammo\") {\n            this.physics = EPhysicsItem.AMMO;\n        } else if (name == \"builtin-cannon-ammo\") {\n            this.physics = EPhysicsItem.ALL;\n        } else if (name == \"builtin-ammo\") {\n            this.physics = EPhysicsItem.BUILTIN_AMMO;\n        }\n\n        switch (this.physics) {\n            case EPhysicsItem.ALL:\n                break;\n            case EPhysicsItem.CANNON_AMMO:\n                if (PhysicsSystem.PHYSICS_CANNON || PhysicsSystem.PHYSICS_AMMO) {\n                    break;\n                }\n\n                let lbCom = this.node.getChildByName('lb')!.getComponent(Label)!;\n                lbCom.enabled = true;\n                lbCom.string = \"测试此场景需要将物理模块设置为 cannon.js 或 ammo.js\";\n                let sprCom = this.getComponentInChildren(Sprite)!;\n                sprCom.enabled = true;\n                break;\n\n            case EPhysicsItem.BUILTIN_AMMO:\n                if (PhysicsSystem.PHYSICS_BUILTIN || PhysicsSystem.PHYSICS_AMMO) {\n                    break;\n                }\n\n                let lbCom1 = this.node.getChildByName('lb')!.getComponent(Label)!;\n                lbCom1.enabled = true;\n                lbCom1.string = \"测试此场景需要将物理模块设置为 builtin 或 ammo.js\";\n                let sprCom1 = this.getComponentInChildren(Sprite)!;\n                sprCom1.enabled = true;\n                break;\n\n            case EPhysicsItem.CANNON:\n                if (!PhysicsSystem.PHYSICS_CANNON) {\n                    let lbCom = this.node.getChildByName('lb')!.getComponent(Label)!;\n                    lbCom.enabled = true;\n                    lbCom.string = \"测试此场景需要将物理模块设置为 cannon.js\";\n                    let sprCom = this.getComponentInChildren(Sprite)!;\n                    sprCom.enabled = true;\n                }\n                break;\n            case EPhysicsItem.AMMO:\n                if (!PhysicsSystem.PHYSICS_AMMO) {\n                    let lbCom = this.node.getChildByName('lb')!.getComponent(Label)!;\n                    lbCom.enabled = true;\n                    lbCom.string = \"测试此场景需要将物理模块设置为 ammo.js\";\n                    let sprCom = this.getComponentInChildren(Sprite)!;\n                    sprCom.enabled = true;\n                }\n                break;\n            case EPhysicsItem.BUILTIN:\n                if (!PhysicsSystem.PHYSICS_BUILTIN) {\n                    let lbCom = this.node.getChildByName('lb')!.getComponent(Label)!;\n                    lbCom.enabled = true;\n                    lbCom.string = \"测试此场景需要将物理模块设置为 builtin\";\n                    let sprCom = this.getComponentInChildren(Sprite)!;\n                    sprCom.enabled = true;\n                }\n                break;\n        }\n    }\n}\n"]}