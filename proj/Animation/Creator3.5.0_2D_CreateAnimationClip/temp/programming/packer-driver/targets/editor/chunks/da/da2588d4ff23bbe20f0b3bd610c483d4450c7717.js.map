{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Animation/Creator3.5.0_2D_CreateAnimationClip/assets/script/CreateClipCtrl.ts"],"names":["_decorator","Component","SpriteAtlas","resources","AnimationComponent","AnimationClip","ccclass","property","CreateClipCtrl","onLoad","animation","getComponent","load","err","atlas","_atlas","addRef","spriteFrames","getSpriteFrames","clip","createWithSpriteFrames","name","wrapMode","WrapMode","Loop","createState","play","onDestroy","decRef"],"mappings":";;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,kB,OAAAA,kB;AAA2BC,MAAAA,a,OAAAA,a;;;;;;;OAC7E;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;gCAGjBQ,c,WADZF,OAAO,CAAC,gBAAD,C,gBAAR,MACaE,cADb,SACoCP,SADpC,CAC8C;AAI1CQ,QAAAA,MAAM,GAAI;AACN,cAAIC,SAAS,GAAG,KAAKC,YAAL,CAAkBP,kBAAlB,CAAhB;AACAD,UAAAA,SAAS,CAACS,IAAV,CAAe,aAAf,EAA8BV,WAA9B,EAA2C,CAACW,GAAD,EAAMC,KAAN,KAAe;AACtD,iBAAKC,MAAL,GAAcD,KAAK,CAACE,MAAN,EAAd;AAEA,gBAAIC,YAAY,GAAkBH,KAAK,CAACI,eAAN,EAAlC;AACA,gBAAIC,IAAI,GAAGd,aAAa,CAACe,sBAAd,CAAqCH,YAArC,EAAmD,EAAnD,CAAX;AACAE,YAAAA,IAAI,CAACE,IAAL,GAAY,KAAZ;AACAF,YAAAA,IAAI,CAACG,QAAL,GAAgBjB,aAAa,CAACkB,QAAd,CAAuBC,IAAvC,CANsD,CAQtD;;AACAd,YAAAA,SAAS,CAACe,WAAV,CAAsBN,IAAtB;AACAT,YAAAA,SAAS,CAACgB,IAAV,CAAe,KAAf;AACH,WAXD;AAYH;;AAEDC,QAAAA,SAAS,GAAI;AACT,eAAKZ,MAAL,CAAYa,MAAZ;;AACA,eAAKb,MAAL,GAAc,IAAd;AACH;;AAvByC,O","sourcesContent":["\nimport { _decorator, Component, SpriteAtlas, resources, AnimationComponent, Asset, AnimationClip, SpriteFrame } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('CreateClipCtrl')\nexport class CreateClipCtrl extends Component {\n\n    _atlas !: Asset;\n\n    onLoad () {\n        var animation = this.getComponent(AnimationComponent)!;\n        resources.load('sheep/atlas', SpriteAtlas, (err, atlas) =>{\n            this._atlas = atlas.addRef();\n\n            var spriteFrames = <SpriteFrame[]>atlas.getSpriteFrames();\n            var clip = AnimationClip.createWithSpriteFrames(spriteFrames, 10)!;\n            clip.name = 'run';\n            clip.wrapMode = AnimationClip.WrapMode.Loop;\n\n            // animation.clips.concat(clip);\n            animation.createState(clip);\n            animation.play('run');\n        })\n    }\n\n    onDestroy () {\n        this._atlas.decRef();\n        this._atlas = null!;\n    }\n}\n\n"]}