{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Demo/Creator3.5.1_BezierCurvePathCreator/assets/scripts/drawBezier.ts"],"names":["_decorator","Component","Node","Prefab","Label","Color","Graphics","EditBox","EventMouse","UITransform","Size","sys","Vec3","tween","Ident","ccclass","property","DrawBezier","isStartRun","resolution","prveRunTime","prvePointCount","currentRunTime","actionLists","onLoad","init","window","on","setMouseLocation","bind","showDeleteBtn","hideDeleteBtn","infoWindow","getComponent","priority","notice","getChildByName","fileInputBox","controlPanel","node","moveBtn","smoothnessInputBox","runTimeInputBox","resolutionWidthInputBox","resolutionHeightInputBox","initGraphics","initNodeEvents","hideInfoWindow","addDeleteBtnEvents","initResolution","point","control","setBezierCurveRunTime","Number","string","saveBezierPath","update","dt","setOperateStatus","deleteBtn","active","drawBezierAll","setCountTimeLabel","getResolution","width","height","setPaperSize","ctx","graphicsNode","lineWidth","addCanvasTouchEvents","box","ident","parent","addDragEvents","addHideEvents","clear","bezierLists","getBezierCurveLists","i","len","length","curve","n","Object","keys","drawBezier","start","position","end","drawThirdOrderBezier","control1","control2","sPos","cPos","ePos","startPos","clone","controlPos","endPos","addSize","set","x","y","z","moveTo","strokeColor","bezierColor","quadraticCurveTo","stroke","lineColor","lineTo","cPos1","cPos2","controlPos1","controlPos2","bezierCurveTo","EventType","MOUSE_MOVE","evt","hideMouseLocation","convertToNodeSpace","event","convertToNodeSpaceAR","getUILocation","MOUSE_DOWN","stopPropagation","getButton","BUTTON_LEFT","isLastCurve","showMsg","deletePoint","save","setNoitce","computeBezierActions","saveBezierPathToJson","name","isBrowser","datas","JSON","stringify","getBezierCurveData","textFileAsBlob","Blob","type","downloadLink","document","createElement","download","innerHTML","webkitURL","href","createObjectURL","URL","onclick","destroyClickedElement","style","display","body","appendChild","click","bezierCurveData","points","time","toAction","pos","push","playMoveAnimation","startCountTime","t","to","call","stopCountTime","console","timeEnd","setResolution","str","log","num","isNaN","paperSize","paper","setContentSize","setRunTime","toString","setCurveSmoothness","setPointCount","play","showInfoWindow","msg","setTimeout","timeInfo","toFixed","setPosition","mouseLocation","setCurveType","setBezierCurveType","_name"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, Label, Color,Graphics, EditBox, EventMouse, UITransform, Size, sys, Vec3, tween } from 'cc';\nimport { Ident } from './Enums';\nconst { ccclass, property } = _decorator;\n\n@ccclass('DrawBezier')\nexport class DrawBezier extends Component {\n    @property(Node)\n    public graphicsNode !:Node;\n    @property(Node)\n    public box !:Node;\n    @property(Prefab)\n    public point !:Prefab;\n    @property(Prefab)\n    public control !:Prefab;\n    @property\n    public bezierColor : Color = new Color(255, 0, 0);\n    @property\n    public lineColor : Color = new Color(0, 255, 255);\n    @property(Node)\n    public infoWindow !:Node;\n    @property(Node)\n    public paper !:Node;\n    @property(Node)\n    public msg !:Node;\n    @property(Label)\n    public timeInfo !:Label;\n    @property(Node)\n    public deleteBtn !:Node;\n    @property(Label)\n    public mouseLocation !:Label;\n\n    notice !: Label;\n    fileInputBox !: EditBox;\n    moveBtn !: Node;\n    smoothnessInputBox !: EditBox;\n    runTimeInputBox !: EditBox;\n    resolutionWidthInputBox !: EditBox;\n    resolutionHeightInputBox !: EditBox;\n    ctx !: Graphics;\n\n\n    isStartRun : boolean =  false;\n    resolution : any = {};\n    prveRunTime : number = 0;\n    prvePointCount : number = 0;\n    currentRunTime : number = 0;\n    actionLists : any[] = [];\n\n    onLoad () {\n        this.init();\n        window['EventListener'].on(\"setMouseLocation\", this.setMouseLocation.bind(this));\n        window['EventListener'].on(\"showDeleteBtn\", this.showDeleteBtn.bind(this));\n        window['EventListener'].on(\"hideDeleteBtn\", this.hideDeleteBtn.bind(this));\n    }\n\n    init () {\n        this.infoWindow.getComponent(UITransform)!.priority = 10;\n        this.notice = this.infoWindow.getChildByName(\"notice\")!.getComponent(Label)!;\n        this.fileInputBox = this.infoWindow.getChildByName(\"Input\")!.getChildByName(\"fileEditBox\")!.getComponent(EditBox)!;\n        let controlPanel = this.node.getChildByName(\"controlPanel\")!;\n        this.moveBtn = controlPanel.getChildByName(\"moveBtn\")!;\n        this.smoothnessInputBox = controlPanel.getChildByName(\"smoothnessInput\")!.getChildByName(\"EditBox\")!.getComponent(EditBox)!;\n        this.runTimeInputBox = controlPanel.getChildByName(\"runTimeInput\")!.getChildByName(\"EditBox\")!.getComponent(EditBox)!;\n        this.resolutionWidthInputBox = controlPanel.getChildByName(\"resolution\")!.getChildByName(\"width\")!.getComponent(EditBox)!;\n        this.resolutionHeightInputBox = controlPanel.getChildByName(\"resolution\")!.getChildByName(\"height\")!.getComponent(EditBox)!;\n        this.initGraphics();\n        this.initNodeEvents();\n        this.hideInfoWindow();\n        this.addDeleteBtnEvents();\n        this.initResolution();\n        // @ts-ignore\n        window['BezierData'].init(this.point, this.control, this.node);\n        // @ts-ignore\n        window['BezierData'].setBezierCurveRunTime(Number(this.runTimeInputBox.string));\n        // @ts-ignore\n        window['BezierData'].saveBezierPath();\n    }\n\n    update (dt: any) {\n        // @ts-ignore\n        window['NodeEvents'].setOperateStatus(!this.deleteBtn.active);\n        this.drawBezierAll();\n        if (this.isStartRun) {\n           this.setCountTimeLabel(dt);\n        }\n    }\n\n    initResolution () {\n        // @ts-ignore\n        this.resolution = window['BezierData'].getResolution();\n        this.resolutionWidthInputBox.string = this.resolution.width;\n        this.resolutionHeightInputBox.string = this.resolution.height;\n        this.setPaperSize();\n    }\n\n    initGraphics () {\n        this.ctx = this.graphicsNode.getComponent(Graphics)!;\n        this.ctx.lineWidth = 2;\n    }\n\n    initNodeEvents () {\n        // @ts-ignore\n        window['NodeEvents'].addCanvasTouchEvents();\n        (this.box as any).ident = Ident.window;\n        (this.moveBtn as any).ident = Ident.window;\n        (this.moveBtn!.parent as any).ident = Ident.window;\n        // @ts-ignore\n        window['NodeEvents'].addDragEvents(this.box);\n        // @ts-ignore\n        window['NodeEvents'].addDragEvents(this.moveBtn, this.moveBtn.parent!);\n        this.addHideEvents(this.moveBtn.parent)\n    }\n\n    drawBezierAll () {\n        this.ctx.clear();\n        // @ts-ignore\n        let bezierLists = window['BezierData'].getBezierCurveLists();\n        for (var i = 0, len = bezierLists.length; i < len; i++) {\n           const curve = bezierLists[i];\n           let n = Object.keys(curve).length;\n           if (n == 3) {\n               this.drawBezier(\n                   curve.start.position,\n                   curve.control.position,\n                   curve.end.position\n                );\n           }\n           if (n == 4) {\n               this.drawThirdOrderBezier(\n                   curve.start.position,\n                   curve.control1.position,\n                   curve.control2.position,\n                   curve.end.position\n                );\n           }\n        }\n    }\n\n    drawBezier (sPos: Vec3, cPos: Vec3, ePos: Vec3) {\n        // 因为坐标转换问题，需要在原本保存的节点坐标进行处理\n        const startPos = sPos.clone();\n        const controlPos = cPos.clone();\n        const endPos = ePos.clone();\n        let addSize = new Size();\n        startPos.set(startPos.x+addSize.width/2, startPos.y+addSize.height/2, startPos.z);\n        controlPos.set(controlPos.x+addSize.width/2, controlPos.y+addSize.height/2, controlPos.z);\n        endPos.set(endPos.x+addSize.width/2, endPos.y+addSize.height/2, endPos.z);\n\n        this.ctx.moveTo(startPos.x, startPos.y);\n        this.ctx.strokeColor = this.bezierColor;\n        this.ctx.quadraticCurveTo(controlPos.x, controlPos.y, endPos.x, endPos.y);\n        this.ctx.stroke();\n        this.ctx.moveTo(endPos.x, endPos.y);\n        this.ctx.strokeColor = this.lineColor;\n        this.ctx.lineTo(controlPos.x, controlPos.y);\n        this.ctx.stroke();\n    }\n\n    drawThirdOrderBezier (sPos: Vec3, cPos1: Vec3, cPos2: Vec3, ePos: Vec3) {\n        // 因为坐标转换问题，需要在原本保存的节点坐标进行处理\n        const startPos = sPos.clone();\n        const controlPos1 = cPos1.clone();\n        const controlPos2 = cPos2.clone();\n        const endPos = ePos.clone();\n        let addSize = new Size();\n        startPos.set(startPos.x+addSize.width/2, startPos.y+addSize.height/2, startPos.z);\n        controlPos1.set(controlPos1.x+addSize.width/2, controlPos1.y+addSize.height/2, controlPos1.z);\n        controlPos2.set(controlPos2.x+addSize.width/2, controlPos2.y+addSize.height/2, controlPos2.z);\n        endPos.set(endPos.x+addSize.width/2, endPos.y+addSize.height/2, endPos.z);\n\n        this.ctx.moveTo(startPos.x, startPos.y);\n        this.ctx.strokeColor = this.bezierColor;\n        this.ctx.bezierCurveTo(controlPos1.x, controlPos1.y, controlPos2.x, controlPos2.y, endPos.x, endPos.y);\n        this.ctx.stroke();\n        this.ctx.moveTo(startPos.x, startPos.y);\n        this.ctx.strokeColor = this.lineColor;\n        this.ctx.lineTo(controlPos1.x, controlPos1.y);\n        this.ctx.stroke();\n        this.ctx.moveTo(endPos.x, endPos.y);\n        this.ctx.lineTo(controlPos2.x, controlPos2.y);\n        this.ctx.stroke();\n    }\n\n    addHideEvents (node: any) {\n        node.on(Node.EventType.MOUSE_MOVE, (evt: any) => {\n           this.hideMouseLocation()\n        })\n    }\n\n    convertToNodeSpace (event: any) {\n        return this.node.getComponent(UITransform)!.convertToNodeSpaceAR(event.getUILocation());\n    }\n\n    addDeleteBtnEvents () {\n        this.deleteBtn.on(Node.EventType.MOUSE_DOWN, (evt: any) => {\n            evt.stopPropagation();\n           if (evt.getButton() == EventMouse.BUTTON_LEFT) {\n               // @ts-ignore\n               if (window['BezierData'].isLastCurve()) {\n                   this.showMsg(\"不能删除最后一个曲线!!\");\n                   return;\n               }\n               this.hideDeleteBtn();\n               // @ts-ignore\n               window['BezierData'].deletePoint();//删除坐标点\n               // @ts-ignore\n               window['BezierData'].saveBezierPath();//保存坐标点\n           }\n        })\n    }\n\n    save () {\n        if (this.fileInputBox.string == \"\") {\n           this.setNoitce(\"文件名不能为空!\");\n           return\n        }\n        this.setNoitce('');\n        this.computeBezierActions();\n        this.saveBezierPathToJson(this.fileInputBox.string);\n    }\n\n    saveBezierPathToJson (name: any) {\n        if (sys.isBrowser) {\n            // @ts-ignore\n           let datas = JSON.stringify(window['BezierData'].getBezierCurveData());\n           var textFileAsBlob = new Blob([datas], { type: 'application/json' });\n           var downloadLink = document.createElement(\"a\");\n           downloadLink.download = name;\n           downloadLink.innerHTML = \"Download File\";\n           if (window.webkitURL != null) {\n               downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);\n           }\n           else {\n               downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n               // @ts-ignore\n               downloadLink.onclick = destroyClickedElement;\n               downloadLink.style.display = \"none\";\n               document.body.appendChild(downloadLink);\n           }\n           downloadLink.click();\n        }\n    }\n\n    computeBezierActions () {\n        // @ts-ignore\n        let bezierCurveData = window['BezierData'].getBezierCurveData();\n        this.actionLists = [];\n        for (var i = 0, len = bezierCurveData.points.length; i < len; i++) {\n           const point = bezierCurveData.points[i];\n           let time = point.length / bezierCurveData.length * bezierCurveData.time;\n           point.time = time;\n           let toAction = {\n               time : time,\n               pos : new Vec3(point.x, point.y, 0)\n           }\n           this.actionLists.push(toAction);\n        }\n    }\n\n    playMoveAnimation () {\n        this.computeBezierActions();\n        this.startCountTime();\n\n        const t = tween(this.box);\n        for(var i=0; i<this.actionLists.length; i++){\n            let time = this.actionLists[i].time;\n            let pos = this.actionLists[i].pos;\n            t.to(time, {position: pos});\n        }\n        t.call(()=>{\n            this.stopCountTime();\n            console.timeEnd(\"time\");\n        }).start();\n    }\n\n    setResolution (str: any, event: any, ident: any) {\n        console.log(str, event, ident);\n        let num = Number(str);\n        if (str == \"\" || isNaN(num)) {\n           this.showMsg(\"分辨率只能填写数字！！！\");\n           event.string = this.resolution[ident];\n           return\n        }\n        this.resolution[ident] = num;\n        // @ts-ignore\n        window['BezierData'].setResolution(this.resolution.width, this.resolution.height);\n        this.setPaperSize();\n        // @ts-ignore\n        window['BezierData'].init(this.point, this.control, this.node);\n    }\n\n    setPaperSize () {\n        let paperSize = new Size(this.resolution.width, this.resolution.height);\n        this.paper.getComponent(UITransform)!.setContentSize(paperSize);\n    }\n\n    setRunTime (str: any) {\n        let num = Number(str);\n        if (str == \"\" || isNaN(num)) {\n           this.showMsg(\"运行时间只能填写数字！！！\");\n           this.runTimeInputBox.string = (this.prveRunTime || 2).toString();\n           return\n        }\n        this.prveRunTime = num;\n        // @ts-ignore\n        window['BezierData'].setBezierCurveRunTime(num);\n    }\n\n    setCurveSmoothness (str: any) {\n        console.log(str);\n        let num = Number(str);\n        if (str == \"\" || isNaN(num)) {\n           this.showMsg(\"曲线平滑度只能填写数字！！！\");\n           this.smoothnessInputBox.string = (this.prvePointCount || 100).toString();\n           return\n        }\n        if (num < 0 || num > 1000) {\n           this.showMsg(\"曲线平滑度取值范围在 0 - 1000！\");\n           this.smoothnessInputBox.string = (this.prvePointCount || 100).toString();\n           return\n        }\n        this.prvePointCount = num;\n        // @ts-ignore\n        window['BezierData'].setPointCount(num);\n    }\n\n    play () {\n        // @ts-ignore\n        window['BezierData'].saveBezierPath();//保存坐标点\n        this.playMoveAnimation()\n    }\n\n    showInfoWindow () {\n        this.infoWindow.active = true;\n        this.setNoitce('');\n    }\n\n    hideInfoWindow () {\n        this.infoWindow.active = false;\n    }\n\n    setNoitce (str: any) {\n        this.notice.string = str;\n    }\n\n    showMsg (msg: any) {\n        this.msg.active = true;\n        this.msg.getComponent(Label)!.string = msg\n        setTimeout(() => {\n           if (this.msg) {\n               this.msg.active = false;\n           }\n        }, 1000);\n    }\n\n    startCountTime () {\n        this.isStartRun = true;\n        this.timeInfo.string = '0';\n        this.currentRunTime = 0;\n    }\n\n    stopCountTime () {\n        this.isStartRun = false;\n    }\n\n    setCountTimeLabel (dt: any) {\n        this.currentRunTime = this.currentRunTime + dt;\n        this.timeInfo.string = \"run time: \" + this.currentRunTime.toFixed(2) + \"s\";\n    }\n\n    showDeleteBtn (pos: any) {\n        this.deleteBtn.active = true;\n        this.deleteBtn.setPosition(pos);\n    }\n\n    hideDeleteBtn () {\n        this.deleteBtn.active = false;\n    }\n\n    setMouseLocation (pos: any) {\n        this.mouseLocation.node.active = true\n        this.mouseLocation.node.setPosition(pos);\n        this.mouseLocation.string = `x:${pos.x.toFixed(0)} y:${pos.y.toFixed(0)}`;\n    }\n\n    hideMouseLocation () {\n        this.mouseLocation.node.active = false;\n    }\n\n    setCurveType (event: any) {\n        console.log(event);\n        // @ts-ignore\n        window['BezierData'].setBezierCurveType(event.node._name)\n    }\n\n}\n"]}