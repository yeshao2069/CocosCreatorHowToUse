{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Tween/Creator3.5.0_2D_TweenCCUtils/assets/ccUtils.ts"],"names":["_decorator","tween","Vec4","Color","RenderComponent","Component","ccclass","property","CCUtils","toggleVisibility","target","duration","_renderComps","_getAllRenderComponents","_tmpComponent","scheduleOnce","i","length","render","enabled","show","start","hide","fadeIn","c","renders","x","color","r","y","g","z","b","w","a","tempColor","to","fadeOut","getComponentsInChildren"],"mappings":";;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAkBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,S,OAAAA,S;;;;;;;OAC1D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAGjBQ,O,WADZF,OAAO,CAAC,SAAD,C,2BAAR,MACaE,OADb,CACqB;AAIjB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACkC,eAAhBC,gBAAgB,CAAEC,MAAF,EAAgBC,QAAgB,GAAG,CAAnC,EAAsC;AAChE,cAAIC,YAAY,GAAG,KAAKC,uBAAL,CAA6BH,MAA7B,CAAnB;;AAEA,cAAIC,QAAQ,GAAG,CAAf,EAAkB;AACd,iBAAKG,aAAL,CAAmBC,YAAnB,CAAgC,MAAI;AAChC,mBAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,YAAY,CAACK,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,oBAAIE,MAAM,GAAGN,YAAY,CAACI,CAAD,CAAzB;AACAE,gBAAAA,MAAM,CAACC,OAAP,GAAiB,CAACD,MAAM,CAACC,OAAzB;AACH;AACJ,aALD,EAKGR,QALH;AAMH,WAPD,MAOO;AACH,iBAAI,IAAIK,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,YAAY,CAACK,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,kBAAIE,MAAM,GAAGN,YAAY,CAACI,CAAD,CAAzB;AACAE,cAAAA,MAAM,CAACC,OAAP,GAAiB,CAACD,MAAM,CAACC,OAAzB;AACH;AACJ;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACuB,eAAJC,IAAI,CAAEV,MAAF,EAAgBC,QAAgB,GAAG,CAAnC,EAAsC;AACrD,cAAIA,QAAQ,GAAG,CAAf,EAAkB;AACd,iBAAKG,aAAL,CAAmBC,YAAnB,CAAgC,MAAI;AAChCd,cAAAA,KAAK,CAACS,MAAD,CAAL,CAAcU,IAAd,GAAqBC,KAArB;AACH,aAFD,EAEGV,QAFH;AAGH,WAJD,MAIO;AACHV,YAAAA,KAAK,CAACS,MAAD,CAAL,CAAcU,IAAd,GAAqBC,KAArB;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACsB,eAAJC,IAAI,CAAEZ,MAAF,EAAgBC,QAAgB,GAAG,CAAnC,EAAsC;AACpD,cAAIA,QAAQ,GAAG,CAAf,EAAkB;AACd,iBAAKG,aAAL,CAAmBC,YAAnB,CAAgC,MAAI;AAChCd,cAAAA,KAAK,CAACS,MAAD,CAAL,CAAcY,IAAd,GAAqBD,KAArB;AACH,aAFD,EAEGV,QAFH;AAGH,WAJD,MAIO;AACHV,YAAAA,KAAK,CAACS,MAAD,CAAL,CAAcY,IAAd,GAAqBD,KAArB;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACwB,eAANE,MAAM,CAAEb,MAAF,EAAgBC,QAAhB,EAAkC;AAClD,cAAIa,CAAC,GAAG,IAAItB,IAAJ,EAAR;;AACA,cAAIuB,OAAO,GAAG,KAAKZ,uBAAL,CAA6BH,MAA7B,CAAd;;AAEA,eAAI,IAAIM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGS,OAAO,CAACR,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpCQ,YAAAA,CAAC,CAACE,CAAF,GAAMD,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBC,CAAvB;AACAJ,YAAAA,CAAC,CAACK,CAAF,GAAMJ,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBG,CAAvB;AACAN,YAAAA,CAAC,CAACO,CAAF,GAAMN,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBK,CAAvB;AACAR,YAAAA,CAAC,CAACS,CAAF,GAAMR,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBO,CAAvB;AACA,gBAAIC,SAAS,GAAG,IAAIhC,KAAJ,EAAhB;AAEAF,YAAAA,KAAK,CAACuB,CAAD,CAAL,CAASY,EAAT,CAAYzB,QAAZ,EAAsB,IAAIT,IAAJ,CAASsB,CAAC,CAACE,CAAX,EAAcF,CAAC,CAACK,CAAhB,EAAmBL,CAAC,CAACO,CAArB,EAAwB,GAAxB,CAAtB,EAAoD;AAChD,0BAAa,MAAM;AACfI,gBAAAA,SAAS,CAACP,CAAV,GAAcJ,CAAC,CAACE,CAAhB;AACAS,gBAAAA,SAAS,CAACH,CAAV,GAAcR,CAAC,CAACK,CAAhB;AACAM,gBAAAA,SAAS,CAACL,CAAV,GAAcN,CAAC,CAACO,CAAhB;AACAI,gBAAAA,SAAS,CAACD,CAAV,GAAcV,CAAC,CAACS,CAAhB;AACAR,gBAAAA,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,GAAmBQ,SAAnB;AACH;AAP+C,aAApD,EAQGd,KARH;AASH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACyB,eAAPgB,OAAO,CAAE3B,MAAF,EAAgBC,QAAhB,EAAkC;AACnD,cAAIa,CAAC,GAAG,IAAItB,IAAJ,EAAR;;AACA,cAAIuB,OAAO,GAAG,KAAKZ,uBAAL,CAA6BH,MAA7B,CAAd;;AAEA,eAAI,IAAIM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGS,OAAO,CAACR,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpCQ,YAAAA,CAAC,CAACE,CAAF,GAAMD,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBC,CAAvB;AACAJ,YAAAA,CAAC,CAACK,CAAF,GAAMJ,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBG,CAAvB;AACAN,YAAAA,CAAC,CAACO,CAAF,GAAMN,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBK,CAAvB;AACAR,YAAAA,CAAC,CAACS,CAAF,GAAMR,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,CAAiBO,CAAvB;AACA,gBAAIC,SAAS,GAAG,IAAIhC,KAAJ,EAAhB;AAEAF,YAAAA,KAAK,CAACuB,CAAD,CAAL,CAASY,EAAT,CAAYzB,QAAZ,EAAsB,IAAIT,IAAJ,CAASsB,CAAC,CAACE,CAAX,EAAcF,CAAC,CAACK,CAAhB,EAAmBL,CAAC,CAACO,CAArB,EAAwB,CAAxB,CAAtB,EAAkD;AAC9C,0BAAa,MAAM;AACfI,gBAAAA,SAAS,CAACP,CAAV,GAAcJ,CAAC,CAACE,CAAhB;AACAS,gBAAAA,SAAS,CAACH,CAAV,GAAcR,CAAC,CAACK,CAAhB;AACAM,gBAAAA,SAAS,CAACL,CAAV,GAAcN,CAAC,CAACO,CAAhB;AACAI,gBAAAA,SAAS,CAACD,CAAV,GAAcV,CAAC,CAACS,CAAhB;AACAR,gBAAAA,OAAO,CAACT,CAAD,CAAP,CAAWW,KAAX,GAAmBQ,SAAnB;AACH;AAP6C,aAAlD,EAQGd,KARH;AASH;AACJ;;AAEqC,eAAvBR,uBAAuB,CAACH,MAAD,EAAe;AACjD,iBAAOA,MAAM,CAAC4B,uBAAP,CAA+BlC,eAA/B,CAAP;AACH;;AApJgB,O,UAqJFU,a,GAAgB,IAAIT,SAAJ,E","sourcesContent":["\r\n\r\nimport { _decorator, Node, tween, Vec4, Color, RenderComponent, Component } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CCUtils')\r\nexport class CCUtils {\r\n\r\n    \r\n\r\n    /**\r\n     * 显隐状态切换\r\n     * 替代cc.toggleVisibility\r\n     * @param target target, 目标节点\r\n     * @param duration duration, 隐藏时间\r\n     * @example\r\n     * ```ts\r\n     * import { CCUtils } from 'ccUtils';\r\n     * CCUtils.toggleVisibility(node);\r\n     * CCUtils.toggleVisibility(node, 2);\r\n     * ```\r\n     */\r\n    public static toggleVisibility (target: Node, duration: number = 0) {\r\n        var _renderComps = this._getAllRenderComponents(target);\r\n\r\n        if (duration > 0) {\r\n            this._tmpComponent.scheduleOnce(()=>{\r\n                for(var i = 0; i < _renderComps.length; i++) {\r\n                    var render = _renderComps[i];\r\n                    render.enabled = !render.enabled;\r\n                }\r\n            }, duration);\r\n        } else {\r\n            for(var i = 0; i < _renderComps.length; i++) {\r\n                var render = _renderComps[i];\r\n                render.enabled = !render.enabled;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 立即显示\r\n     * tween版本实现，替代cc.show\r\n     * @param target target, 目标节点\r\n     * @param duration duration, 隐藏时间\r\n     * @example\r\n     * ```ts\r\n     * import { CCUtils } from 'ccUtils';\r\n     * CCUtils.show(node);\r\n     * CCUtils.show(node, 2);\r\n     * ```\r\n     */\r\n     public static show (target: Node, duration: number = 0) {\r\n        if (duration > 0) {\r\n            this._tmpComponent.scheduleOnce(()=>{\r\n                tween(target).show().start();\r\n            }, duration);\r\n        } else {\r\n            tween(target).show().start();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 立即隐藏\r\n     * tween版本实现，替代cc.hide\r\n     * @param target target, 目标节点\r\n     * @param duration duration, 隐藏时间\r\n     * @example\r\n     * ```ts\r\n     * import { CCUtils } from 'ccUtils';\r\n     * CCUtils.hide(node);\r\n     * CCUtils.hide(node, 2);\r\n     * ```\r\n     */\r\n    public static hide (target: Node, duration: number = 0) {\r\n        if (duration > 0) {\r\n            this._tmpComponent.scheduleOnce(()=>{\r\n                tween(target).hide().start();\r\n            }, duration);\r\n        } else {\r\n            tween(target).hide().start();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 渐显效果 \r\n     * tween版本实现，替代cc.fadeIn\r\n     * @param target target, 目标节点\r\n     * @param duration duration, 渐显时间, 单位秒\r\n     * @example \r\n     * ```ts\r\n     * import { CCUtils } from 'ccUtils';\r\n     * CCUtils.fadeIn(node, 1);\r\n     * ```\r\n     */\r\n    public static fadeIn (target: Node, duration: number) {\r\n        let c = new Vec4();\r\n        let renders = this._getAllRenderComponents(target);\r\n\r\n        for(let i = 0; i < renders.length; i++) {\r\n            c.x = renders[i].color.r;\r\n            c.y = renders[i].color.g;\r\n            c.z = renders[i].color.b;\r\n            c.w = renders[i].color.a;\r\n            let tempColor = new Color();\r\n\r\n            tween(c).to(duration, new Vec4(c.x, c.y, c.z, 255), {\r\n                'onUpdate' : () => {\r\n                    tempColor.r = c.x;\r\n                    tempColor.b = c.y;\r\n                    tempColor.g = c.z;\r\n                    tempColor.a = c.w;\r\n                    renders[i].color = tempColor;\r\n                }  \r\n            }).start();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 渐隐效果 \r\n     * tween版本实现，替代cc.fadeOut\r\n     * @param target target, 目标节点\r\n     * @param duration duration, 渐显时间, 单位秒\r\n     * @example \r\n     * ```ts\r\n     * import { CCUtils } from 'ccUtils';\r\n     * CCUtils.fadeIn(node, 1);\r\n     * ```\r\n     */\r\n    public static fadeOut (target: Node, duration: number) {\r\n        let c = new Vec4();\r\n        let renders = this._getAllRenderComponents(target);\r\n\r\n        for(let i = 0; i < renders.length; i++) {\r\n            c.x = renders[i].color.r;\r\n            c.y = renders[i].color.g;\r\n            c.z = renders[i].color.b;\r\n            c.w = renders[i].color.a;\r\n            let tempColor = new Color();\r\n\r\n            tween(c).to(duration, new Vec4(c.x, c.y, c.z, 0), {\r\n                'onUpdate' : () => {\r\n                    tempColor.r = c.x;\r\n                    tempColor.b = c.y;\r\n                    tempColor.g = c.z;\r\n                    tempColor.a = c.w;\r\n                    renders[i].color = tempColor;\r\n                }  \r\n            }).start();\r\n        }\r\n    }\r\n\r\n    private static _getAllRenderComponents(target: Node) {\r\n        return target.getComponentsInChildren(RenderComponent);\r\n    }\r\n    private static _tmpComponent = new Component();\r\n}"]}