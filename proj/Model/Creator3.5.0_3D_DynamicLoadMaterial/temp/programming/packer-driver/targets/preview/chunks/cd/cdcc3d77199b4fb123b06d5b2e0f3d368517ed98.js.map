{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Model/Creator3.5.0_3D_DynamicLoadMaterial/assets/script/DynamicLoadMaterial.ts"],"names":["_decorator","Component","MeshRenderer","Material","resources","error","ccclass","property","DynamicLoadMaterial","start","scheduleOnce","load","err","material","_material","addRef","meshRenderer","setMaterial","onDestroy","decRef"],"mappings":";;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;;;;;;;OAC7D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;qCAGjBQ,mB,WADZF,OAAO,CAAC,qBAAD,C,UAGHC,QAAQ,CAACL,YAAD,C,2BAHb,MACaM,mBADb,SACyCP,SADzC,CACmD;AAAA;AAAA;;AAAA;AAAA;;AAO/CQ,QAAAA,KAAK,GAAG;AACJ,eAAKC,YAAL,CAAkB,MAAI;AAClBN,YAAAA,SAAS,CAACO,IAAV,CAAe,iCAAf,EAAkDR,QAAlD,EAA4D,CAACS,GAAD,EAAWC,QAAX,KAAkC;AAC1F,kBAAID,GAAJ,EAAS;AACLP,gBAAAA,KAAK,CAACO,GAAD,CAAL;AACA;AACH;;AACD,mBAAKE,SAAL,GAAkBD,QAAD,CAAkBE,MAAlB,EAAjB;AACA,mBAAKC,YAAL,CAAkBC,WAAlB,CAA8BJ,QAA9B,EAAwC,CAAxC;AACH,aAPD;AAQH,WATD,EASG,CATH;AAUH;;AAEDK,QAAAA,SAAS,GAAG;AACR,eAAKJ,SAAL,IAAkB,KAAKA,SAAL,CAAeK,MAAf,EAAlB;AACA,eAAKL,SAAL,GAAiB,IAAjB;AACH;;AAvB8C,O","sourcesContent":["\nimport { _decorator, Component, MeshRenderer, Material, resources, error } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('DynamicLoadMaterial')\nexport class DynamicLoadMaterial extends Component {\n\n    @property(MeshRenderer)\n    meshRenderer !: MeshRenderer;\n\n    _material !: Material;\n\n    start (){\n        this.scheduleOnce(()=>{\n            resources.load('materials/dynamic-load-material', Material, (err: any, material: Material) => {\n                if (err) {\n                    error(err);\n                    return;\n                }\n                this._material = (material as any).addRef();\n                this.meshRenderer.setMaterial(material, 0);\n            })\n        }, 1);\n    }\n\n    onDestroy (){\n        this._material && this._material.decRef();\n        this._material = null!;\n    }\n}\n\n"]}