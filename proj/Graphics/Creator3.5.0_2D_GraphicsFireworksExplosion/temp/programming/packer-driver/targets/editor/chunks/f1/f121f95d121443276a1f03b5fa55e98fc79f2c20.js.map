{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Graphics/Creator3.5.0_2D_GraphicsFireworksExplosion/assets/script/draw.ts"],"names":["_decorator","color","Component","Node","Graphics","Vec2","Layers","ccclass","property","config1","width","widthRatio","config2","UpLine","startPos","controlPos","endPos","downLine","boomLine","boomChip","ControlPos","EndPos","Draw","start","BeamBoom","BeamUp","paint1","GetNewPaint","t","inter","GradientCurve","BeamDown","paint2","paint3","paint","config","p0","p1","p2","callBack","pt","step","pre","pEndPos","BesselCurve","clone","y","DrawLines","limt","leng","loop","unschedule","schedule","panit","end","i","length","DrawLine","strokeColor","lineWidth","moveTo","x","lineTo","stroke","t1","t2","t3","a1","multiply2f","a2","a3","a2t","add","a1t","node","addChild","layer","Enum","UI_2D","g","addComponent","min","number","max","Math","onDestroy","unscheduleAllCallbacks"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,I,OAAAA,I;AAAaC,MAAAA,M,OAAAA,M;;;;;;;OAC9D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;AAE1BS,MAAAA,O,GAAU,CACV;AAAER,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,EAAhB,CAAd;AAAmCS,QAAAA,KAAK,EAAE,EAA1C;AAA8CC,QAAAA,UAAU,EAAE,CAAC;AAA3D,OADU,EAEV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,EAAhB,CAAd;AAAmCS,QAAAA,KAAK,EAAE,EAA1C;AAA8CC,QAAAA,UAAU,EAAE,CAAC;AAA3D,OAFU,EAGV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,EAAe,GAAf,CAAd;AAAmCS,QAAAA,KAAK,EAAE,EAA1C;AAA8CC,QAAAA,UAAU,EAAE,CAAC;AAA3D,OAHU,EAIV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAd;AAAoCS,QAAAA,KAAK,EAAE,EAA3C;AAA+CC,QAAAA,UAAU,EAAE,CAAC;AAA5D,OAJU,EAKV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAd;AAAoCS,QAAAA,KAAK,EAAE,CAA3C;AAA8CC,QAAAA,UAAU,EAAE,CAAC;AAA3D,OALU,C;AAQVC,MAAAA,O,GAAU,CACV;AAAEX,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,EAAhB,CAAd;AAAmCS,QAAAA,KAAK,EAAE,EAA1C;AAA8CC,QAAAA,UAAU,EAAE;AAA1D,OADU,EAEV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,EAAhB,CAAd;AAAmCS,QAAAA,KAAK,EAAE,EAA1C;AAA8CC,QAAAA,UAAU,EAAE;AAA1D,OAFU,EAGV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,EAAe,EAAf,CAAd;AAAkCS,QAAAA,KAAK,EAAE,EAAzC;AAA6CC,QAAAA,UAAU,EAAE;AAAzD,OAHU,EAIV;AAAEV,QAAAA,KAAK,EAAEA,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,EAAhB,CAAd;AAAmCS,QAAAA,KAAK,EAAE,CAA1C;AAA6CC,QAAAA,UAAU,EAAE;AAAzD,OAJU,C;AAOVE,MAAAA,M,GAAS;AACTC,QAAAA,QAAQ,EAAE,IAAIT,IAAJ,CAAS,CAAT,EAAY,CAAZ,CADD;AAETU,QAAAA,UAAU,EAAE,IAAIV,IAAJ,CAAS,CAAT,EAAY,GAAZ,CAFH;AAGTW,QAAAA,MAAM,EAAE,IAAIX,IAAJ,CAAS,GAAT,EAAc,IAAd;AAHC,O;AAMTY,MAAAA,Q,GAAW;AACXH,QAAAA,QAAQ,EAAE,IAAIT,IAAJ,CAAS,GAAT,EAAc,IAAd,CADC;AAEXU,QAAAA,UAAU,EAAE,IAAIV,IAAJ,CAAS,GAAT,EAAc,CAAC,GAAf,CAFD;AAGXW,QAAAA,MAAM,EAAE,IAAIX,IAAJ,CAAS,GAAT,EAAc,CAAd;AAHG,O;AAMXa,MAAAA,Q,GAAW;AACXJ,QAAAA,QAAQ,EAAE,IAAIT,IAAJ,CAAS,CAAT,EAAY,CAAZ,CADC;AAEXU,QAAAA,UAAU,EAAE,IAAIV,IAAJ,CAAS,CAAT,EAAY,GAAZ,CAFD;AAGXW,QAAAA,MAAM,EAAE,IAAIX,IAAJ,CAAS,GAAT,EAAc,IAAd;AAHG,O;AAMXc,MAAAA,Q,GAAW,CACX;AACIC,QAAAA,UAAU,EAAE,IAAIf,IAAJ,CAAS,GAAT,EAAc,GAAd,CADhB;AAEIgB,QAAAA,MAAM,EAAE,IAAIhB,IAAJ,CAAS,GAAT,EAAc,CAAd;AAFZ,OADW,EAKX;AACIe,QAAAA,UAAU,EAAE,IAAIf,IAAJ,CAAS,CAAT,EAAY,GAAZ,CADhB;AAEIgB,QAAAA,MAAM,EAAE,IAAIhB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AAFZ,OALW,EASX;AACIe,QAAAA,UAAU,EAAE,IAAIf,IAAJ,CAAS,GAAT,EAAc,CAAC,GAAf,CADhB;AAEIgB,QAAAA,MAAM,EAAE,IAAIhB,IAAJ,CAAS,GAAT,EAAc,CAAd;AAFZ,OATW,EAaX;AACIe,QAAAA,UAAU,EAAE,IAAIf,IAAJ,CAAS,CAAC,GAAV,EAAe,CAAC,GAAhB,CADhB;AAEIgB,QAAAA,MAAM,EAAE,IAAIhB,IAAJ,CAAS,CAAC,GAAV,EAAe,CAAf;AAFZ,OAbW,EAiBX;AACIe,QAAAA,UAAU,EAAE,IAAIf,IAAJ,CAAS,CAAC,GAAV,EAAe,CAAC,GAAhB,CADhB;AAEIgB,QAAAA,MAAM,EAAE,IAAIhB,IAAJ,CAAS,CAAC,GAAV,EAAe,CAAf;AAFZ,OAjBW,EAqBX;AACIe,QAAAA,UAAU,EAAE,IAAIf,IAAJ,CAAS,IAAT,EAAe,CAAC,GAAhB,CADhB;AAEIgB,QAAAA,MAAM,EAAE,IAAIhB,IAAJ,CAAS,IAAT,EAAe,CAAf;AAFZ,OArBW,C;;yBA4BMiB,I,WADpBf,OAAO,CAAC,MAAD,C,gBAAR,MACqBe,IADrB,SACkCpB,SADlC,CAC4C;AAExCqB,QAAAA,KAAK,GAAG;AACJ,eAAKC,QAAL,GADI,CAGJ;AACA;AACH,SAPuC,CASxC;AACA;;;AACOC,QAAAA,MAAM,GAAG;AACZ,cAAIC,MAAM,GAAG,KAAKC,WAAL,EAAb;AAEA,cAAIC,CAAC,GAAG,CAAR;AACA,cAAIC,KAAK,GAAG,CAAZ,CAJY,CAMZ;;AACA,eAAKC,aAAL,CAAmBJ,MAAnB,EAA2BjB,OAA3B,EAAoCoB,KAApC,EAA2ChB,MAAM,CAACC,QAAlD,EAA4DD,MAAM,CAACE,UAAnE,EAA+EF,MAAM,CAACG,MAAtF,EAA8FY,CAA9F,EAAiG,MAAM;AACnG,iBAAKG,QAAL;AACH,WAFD;AAGH,SArBuC,CAuBxC;;;AACOA,QAAAA,QAAQ,GAAG;AACd,cAAIC,MAAM,GAAG,KAAKL,WAAL,EAAb;AACA,eAAKG,aAAL,CAAmBE,MAAnB,EAA2BvB,OAA3B,EAAoC,EAApC,EAAwCQ,QAAQ,CAACH,QAAjD,EAA2DG,QAAQ,CAACF,UAApE,EAAgFE,QAAQ,CAACD,MAAzF,EAAiG,CAAjG;AACH,SA3BuC,CA6BxC;;;AACOQ,QAAAA,QAAQ,GAAG;AACd,cAAIS,MAAM,GAAG,KAAKN,WAAL,EAAb,CADc,CAGd;;AACA,eAAKG,aAAL,CAAmBG,MAAnB,EAA2BxB,OAA3B,EAAoC,CAApC,EAAuCS,QAAQ,CAACJ,QAAhD,EAA0DI,QAAQ,CAACH,UAAnE,EAA+EG,QAAQ,CAACF,MAAxF,EAAgG,CAAhG,EAAmG,MAAM;AACrG;AACA,iBAAKc,aAAL,CAAmBG,MAAnB,EAA2BrB,OAA3B,EAAoC,EAApC,EAAwCM,QAAQ,CAACF,MAAjD,EAAyDG,QAAQ,CAAC,CAAD,CAAR,CAAYC,UAArE,EAAiFD,QAAQ,CAAC,CAAD,CAAR,CAAYE,MAA7F,EAAqG,CAArG;AACA,iBAAKS,aAAL,CAAmBG,MAAnB,EAA2BrB,OAA3B,EAAoC,EAApC,EAAwCM,QAAQ,CAACF,MAAjD,EAAyDG,QAAQ,CAAC,CAAD,CAAR,CAAYC,UAArE,EAAiFD,QAAQ,CAAC,CAAD,CAAR,CAAYE,MAA7F,EAAqG,CAArG;AACA,iBAAKS,aAAL,CAAmBG,MAAnB,EAA2BrB,OAA3B,EAAoC,EAApC,EAAwCM,QAAQ,CAACF,MAAjD,EAAyDG,QAAQ,CAAC,CAAD,CAAR,CAAYC,UAArE,EAAiFD,QAAQ,CAAC,CAAD,CAAR,CAAYE,MAA7F,EAAqG,CAArG;AACA,iBAAKS,aAAL,CAAmBG,MAAnB,EAA2BrB,OAA3B,EAAoC,EAApC,EAAwCM,QAAQ,CAACF,MAAjD,EAAyDG,QAAQ,CAAC,CAAD,CAAR,CAAYC,UAArE,EAAiFD,QAAQ,CAAC,CAAD,CAAR,CAAYE,MAA7F,EAAqG,CAArG;AACA,iBAAKS,aAAL,CAAmBG,MAAnB,EAA2BrB,OAA3B,EAAoC,EAApC,EAAwCM,QAAQ,CAACF,MAAjD,EAAyDG,QAAQ,CAAC,CAAD,CAAR,CAAYC,UAArE,EAAiFD,QAAQ,CAAC,CAAD,CAAR,CAAYE,MAA7F,EAAqG,CAArG;AACA,iBAAKS,aAAL,CAAmBG,MAAnB,EAA2BrB,OAA3B,EAAoC,EAApC,EAAwCM,QAAQ,CAACF,MAAjD,EAAyDG,QAAQ,CAAC,CAAD,CAAR,CAAYC,UAArE,EAAiFD,QAAQ,CAAC,CAAD,CAAR,CAAYE,MAA7F,EAAqG,CAArG;AACH,WARD;AASH,SA3CuC,CA6CxC;;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACWS,QAAAA,aAAa,CAACI,KAAD,EAAkBC,MAAlB,EAA+BN,KAA/B,EAA8CO,EAA9C,EAAwDC,EAAxD,EAAkEC,EAAlE,EAA4EV,CAAS,GAAG,CAAxF,EAA2FW,QAAkB,GAAG,IAAhH,EAAuH;AACvI,cAAIC,EAAE,GAAG,CAAT;AACA,cAAIC,IAAI,GAAG,CAAC,IAAIb,CAAL,KAAWC,KAAK,GAAG,EAAnB,CAAX;AACA,cAAIa,GAAS,GAAGN,EAAhB;AACA,cAAI1B,KAAJ;;AAEA,iBAAO8B,EAAE,GAAGZ,CAAZ,EAAe;AACX;AACAY,YAAAA,EAAE,IAAI,IAAN;AACA,gBAAIG,OAAO,GAAG,KAAKC,WAAL,CAAiBJ,EAAjB,EAAqBJ,EAAE,CAACS,KAAH,EAArB,EAAiCR,EAAE,CAACQ,KAAH,EAAjC,EAA6CP,EAAE,CAACO,KAAH,EAA7C,CAAd;;AACA,gBAAIV,MAAM,CAAC,CAAD,CAAN,CAAUxB,UAAV,GAAuB,CAA3B,EAA8B;AAC1BD,cAAAA,KAAK,GAAG4B,EAAE,CAACQ,CAAH,GAAOV,EAAE,CAACU,CAAV,GAAc,IAAIN,EAAlB,GAAuBA,EAA/B;AACH,aAFD,MAEO;AACH9B,cAAAA,KAAK,GAAGyB,MAAM,CAAC,CAAD,CAAN,CAAUxB,UAAlB;AACH;;AACD,iBAAKoC,SAAL,CAAeb,KAAf,EAAsBC,MAAtB,EAA8BO,GAA9B,EAAmCC,OAAnC,EAA4C,KAAKK,IAAL,CAAU,GAAV,EAAetC,KAAf,EAAsB,CAAtB,CAA5C;AACAgC,YAAAA,GAAG,GAAGC,OAAN;AACH,WAjBsI,CAmBvI;;;AACA,cAAIM,IAAI,GAAGpB,KAAK,GAAG,EAAnB;;AACA,cAAIqB,IAAI,GAAG,MAAM;AACbV,YAAAA,EAAE,IAAIC,IAAN;;AACA,gBAAID,EAAE,GAAG,CAAT,EAAY;AACR,mBAAKW,UAAL,CAAgBD,IAAhB;AACAX,cAAAA,QAAQ,IAAIA,QAAQ,EAApB;AACH,aAHD,MAGO;AACH,kBAAII,OAAO,GAAG,KAAKC,WAAL,CAAiBJ,EAAjB,EAAqBJ,EAAE,CAACS,KAAH,EAArB,EAAiCR,EAAE,CAACQ,KAAH,EAAjC,EAA6CP,EAAE,CAACO,KAAH,EAA7C,CAAd;;AACA,kBAAIV,MAAM,CAAC,CAAD,CAAN,CAAUxB,UAAV,GAAuB,CAA3B,EAA8B;AAC1BD,gBAAAA,KAAK,GAAG4B,EAAE,CAACQ,CAAH,GAAOV,EAAE,CAACU,CAAV,GAAc,IAAIN,EAAlB,GAAuBA,EAA/B;AACH,eAFD,MAEO;AACH9B,gBAAAA,KAAK,GAAGyB,MAAM,CAAC,CAAD,CAAN,CAAUxB,UAAlB;AACH;;AACD,mBAAKoC,SAAL,CAAeb,KAAf,EAAsBC,MAAtB,EAA8BO,GAA9B,EAAmCC,OAAnC,EAA4C,KAAKK,IAAL,CAAU,GAAV,EAAetC,KAAf,EAAsB,CAAtB,CAA5C;AACAgC,cAAAA,GAAG,GAAGC,OAAN;AACH;AACJ,WAfD;;AAgBA,eAAKS,QAAL,CAAcF,IAAd,EAAoB,IAApB,EAA0BD,IAAI,GAAG,EAAjC;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACWF,QAAAA,SAAS,CAACM,KAAD,EAAkBlB,MAAlB,EAA+BZ,KAA/B,EAA4C+B,GAA5C,EAAuD3C,UAAvD,EAA2E;AACvF,eAAK,IAAI4C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,MAAM,CAACqB,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpC,iBAAKE,QAAL,CAAcJ,KAAd,EAAqB9B,KAArB,EAA4B+B,GAA5B,EAAiCnB,MAAM,CAACoB,CAAD,CAAN,CAAUtD,KAA3C,EAAkDkC,MAAM,CAACoB,CAAD,CAAN,CAAU7C,KAAV,GAAkBC,UAApE;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACW8C,QAAAA,QAAQ,CAACJ,KAAD,EAAkBjB,EAAlB,EAA4BC,EAA5B,EAAsCpC,KAAtC,EAAoDS,KAApD,EAAmE;AAC9E2C,UAAAA,KAAK,CAACK,WAAN,GAAoBzD,KAApB;AACAoD,UAAAA,KAAK,CAACM,SAAN,GAAkBjD,KAAlB;AACA2C,UAAAA,KAAK,CAACO,MAAN,CAAaxB,EAAE,CAACyB,CAAhB,EAAmBzB,EAAE,CAACU,CAAtB;AACAO,UAAAA,KAAK,CAACS,MAAN,CAAazB,EAAE,CAACwB,CAAhB,EAAmBxB,EAAE,CAACS,CAAtB;AACAO,UAAAA,KAAK,CAACU,MAAN;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACWnB,QAAAA,WAAW,CAAChB,CAAD,EAAYQ,EAAZ,EAAsBC,EAAtB,EAAgCC,EAAhC,EAA0C;AACxD,cAAI0B,EAAE,GAAG,IAAIpC,CAAC,IAAI,CAAlB;AACA,cAAIqC,EAAE,GAAG,IAAIrC,CAAJ,IAAS,IAAIA,CAAb,CAAT;AACA,cAAIsC,EAAE,GAAGtC,CAAC,IAAI,CAAd;AACA,cAAIuC,EAAE,GAAG/B,EAAE,CAACgC,UAAH,CAAcJ,EAAd,EAAkBA,EAAlB,CAAT;AACA,cAAIK,EAAE,GAAGhC,EAAE,CAAC+B,UAAH,CAAcH,EAAd,EAAkBA,EAAlB,CAAT;AACA,cAAIK,EAAE,GAAGhC,EAAE,CAAC8B,UAAH,CAAcF,EAAd,EAAkBA,EAAlB,CAAT;AACA,cAAIK,GAAG,GAAGF,EAAE,CAACG,GAAH,CAAOF,EAAP,EAAWzB,KAAX,EAAV;AACA,cAAI4B,GAAG,GAAGN,EAAE,CAACK,GAAH,CAAOD,GAAP,EAAY1B,KAAZ,EAAV;AACA,iBAAO4B,GAAP;AACH,SAhJuC,CAkJxC;;AAEA;;;AACO9C,QAAAA,WAAW,GAAG;AACjB,cAAI+C,IAAI,GAAG,IAAIvE,IAAJ,EAAX;AACA,eAAKuE,IAAL,CAAUC,QAAV,CAAmBD,IAAnB;AACAA,UAAAA,IAAI,CAACE,KAAL,GAAatE,MAAM,CAACuE,IAAP,CAAYC,KAAzB;AACA,cAAIC,CAAC,GAAGL,IAAI,CAACM,YAAL,CAAkB5E,QAAlB,CAAR;AAEA,iBAAO2E,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACW/B,QAAAA,IAAI,CAACiC,GAAD,EAAcC,MAAd,EAA8BC,GAA9B,EAA2C;AAClD,iBAAOC,IAAI,CAACH,GAAL,CAASG,IAAI,CAACD,GAAL,CAASF,GAAT,EAAcC,MAAd,CAAT,EAAgCC,GAAhC,CAAP;AACH;;AAEDE,QAAAA,SAAS,GAAG;AACR,eAAKC,sBAAL,GADQ,CACuB;AAClC;;AA1KuC,O","sourcesContent":["import { _decorator, color, Component, Node, Graphics, Vec2, Color, Layers, getWorldTransformUntilRoot } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nvar config1 = [\r\n    { color: color(255, 147, 145, 51), width: 50, widthRatio: -1 },\r\n    { color: color(255, 147, 145, 80), width: 35, widthRatio: -1 },\r\n    { color: color(255, 172, 76, 125), width: 20, widthRatio: -1 },\r\n    { color: color(255, 255, 255, 125), width: 10, widthRatio: -1 },\r\n    { color: color(255, 255, 255, 255), width: 5, widthRatio: -1 },\r\n];\r\n\r\nvar config2 = [\r\n    { color: color(255, 147, 145, 25), width: 30, widthRatio: 1 },\r\n    { color: color(255, 147, 145, 40), width: 20, widthRatio: 1 },\r\n    { color: color(255, 172, 76, 65), width: 10, widthRatio: 1 },\r\n    { color: color(255, 255, 255, 65), width: 5, widthRatio: 1 },\r\n];\r\n\r\nvar UpLine = {\r\n    startPos: new Vec2(0, 0),\r\n    controlPos: new Vec2(0, 900),\r\n    endPos: new Vec2(360, 1100),\r\n};\r\n\r\nvar downLine = {\r\n    startPos: new Vec2(360, 1100),\r\n    controlPos: new Vec2(400, -200),\r\n    endPos: new Vec2(800, 0),\r\n};\r\n\r\nvar boomLine = {\r\n    startPos: new Vec2(0, 0),\r\n    controlPos: new Vec2(0, 900),\r\n    endPos: new Vec2(294, 1100),\r\n};\r\n\r\nvar boomChip = [\r\n    {\r\n        ControlPos: new Vec2(330, 100),\r\n        EndPos: new Vec2(600, 0)\r\n    },\r\n    {\r\n        ControlPos: new Vec2(0, 500),\r\n        EndPos: new Vec2(0, 0)\r\n    },\r\n    {\r\n        ControlPos: new Vec2(354, -400),\r\n        EndPos: new Vec2(700, 0)\r\n    },\r\n    {\r\n        ControlPos: new Vec2(-274, -600),\r\n        EndPos: new Vec2(-274, 0)\r\n    },\r\n    {\r\n        ControlPos: new Vec2(-234, -800),\r\n        EndPos: new Vec2(-234, 0)\r\n    },\r\n    {\r\n        ControlPos: new Vec2(1100, -500),\r\n        EndPos: new Vec2(1100, 0)\r\n    },\r\n]\r\n\r\n@ccclass('Draw')\r\nexport default class Draw extends Component {\r\n\r\n    start() {\r\n        this.BeamBoom();\r\n\r\n        // 测试\r\n        // this.BeamUp();\r\n    }\r\n\r\n    //------------------------------外部引用------------------------------\r\n    //上升曲线\r\n    public BeamUp() {\r\n        let paint1 = this.GetNewPaint();\r\n\r\n        let t = 0\r\n        let inter = 6;\r\n\r\n        //画线\r\n        this.GradientCurve(paint1, config1, inter, UpLine.startPos, UpLine.controlPos, UpLine.endPos, t, () => {\r\n            this.BeamDown();\r\n        });\r\n    }\r\n\r\n    //下降曲线\r\n    public BeamDown() {\r\n        let paint2 = this.GetNewPaint();\r\n        this.GradientCurve(paint2, config1, 10, downLine.startPos, downLine.controlPos, downLine.endPos, 0);\r\n    }\r\n\r\n    //爆炸曲线\r\n    public BeamBoom() {\r\n        let paint3 = this.GetNewPaint();\r\n\r\n        // 烟花开始\r\n        this.GradientCurve(paint3, config1, 6, boomLine.startPos, boomLine.controlPos, boomLine.endPos, 0, () => {\r\n            // 烟花炸开\r\n            this.GradientCurve(paint3, config2, 10, boomLine.endPos, boomChip[0].ControlPos, boomChip[0].EndPos, 0);\r\n            this.GradientCurve(paint3, config2, 10, boomLine.endPos, boomChip[1].ControlPos, boomChip[1].EndPos, 0);\r\n            this.GradientCurve(paint3, config2, 10, boomLine.endPos, boomChip[2].ControlPos, boomChip[2].EndPos, 0);\r\n            this.GradientCurve(paint3, config2, 10, boomLine.endPos, boomChip[3].ControlPos, boomChip[3].EndPos, 0);\r\n            this.GradientCurve(paint3, config2, 10, boomLine.endPos, boomChip[4].ControlPos, boomChip[4].EndPos, 0);\r\n            this.GradientCurve(paint3, config2, 10, boomLine.endPos, boomChip[5].ControlPos, boomChip[5].EndPos, 0);\r\n        });\r\n    }\r\n\r\n    //----------------------------------绘画封装-----------------------------------\r\n    /**\r\n     * 渐变曲线 从p0逐渐画到p2\r\n     * @param paint 画笔\r\n     * @param config 配置\r\n     * @param inter 完成时间\r\n     * @param p0 起点\r\n     * @param p1 控制点\r\n     * @param p2 终点\r\n     * @param t  起始比例\r\n     */\r\n    public GradientCurve(paint: Graphics, config: any, inter: number, p0: Vec2, p1: Vec2, p2: Vec2, t: number = 0, callBack: Function = null!) {\r\n        let pt = 0;\r\n        let step = (1 - t) / (inter * 25);\r\n        let pre: Vec2 = p0;\r\n        let width;\r\n\r\n        while (pt < t) {\r\n            // 绘制固定区域\r\n            pt += 0.01;\r\n            let pEndPos = this.BesselCurve(pt, p0.clone(), p1.clone(), p2.clone());\r\n            if (config[0].widthRatio < 0) {\r\n                width = p2.y > p0.y ? 1 - pt : pt;\r\n            } else {\r\n                width = config[0].widthRatio;\r\n            }\r\n            this.DrawLines(paint, config, pre, pEndPos, this.limt(0.3, width, 1));\r\n            pre = pEndPos;\r\n        }\r\n\r\n        // 绘制动态区域\r\n        let leng = inter * 25;\r\n        let loop = () => {\r\n            pt += step;\r\n            if (pt > 1) {\r\n                this.unschedule(loop);\r\n                callBack && callBack();\r\n            } else {\r\n                let pEndPos = this.BesselCurve(pt, p0.clone(), p1.clone(), p2.clone());\r\n                if (config[0].widthRatio < 0) {\r\n                    width = p2.y > p0.y ? 1 - pt : pt\r\n                } else {\r\n                    width = config[0].widthRatio\r\n                }\r\n                this.DrawLines(paint, config, pre, pEndPos, this.limt(0.3, width, 1));\r\n                pre = pEndPos;\r\n            }\r\n        }\r\n        this.schedule(loop, 0.04, leng + 10)\r\n    }\r\n\r\n    /**\r\n     * 画重叠的直线\r\n     * @param panit 画笔\r\n     * @param start 开始节点\r\n     * @param end 结束节点\r\n     * @param config 配置\r\n     * @param widthRatio 宽度比例\r\n     */\r\n    public DrawLines(panit: Graphics, config: any, start: Vec2, end: Vec2, widthRatio: number) {\r\n        for (let i = 0; i < config.length; i++) {\r\n            this.DrawLine(panit, start, end, config[i].color, config[i].width * widthRatio);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 画直线\r\n     * @param panit 画笔\r\n     * @param p0  起点\r\n     * @param p1  终点\r\n     * @param color 颜色\r\n     * @param width 宽度\r\n     */\r\n    public DrawLine(panit: Graphics, p0: Vec2, p1: Vec2, color: Color, width: number) {\r\n        panit.strokeColor = color;\r\n        panit.lineWidth = width;\r\n        panit.moveTo(p0.x, p0.y);\r\n        panit.lineTo(p1.x, p1.y);\r\n        panit.stroke();\r\n    }\r\n\r\n    /**\r\n     * 获得一条贝塞尔曲线上的点\r\n     * @param t  x比例\r\n     * @param p0 起点\r\n     * @param p1 控制点\r\n     * @param p2 重点\r\n     * @returns 对应的坐标\r\n     */\r\n    public BesselCurve(t: number, p0: Vec2, p1: Vec2, p2: Vec2) {\r\n        let t1 = 1 - t ** 2;\r\n        let t2 = 2 * t * (1 - t);\r\n        let t3 = t ** 2;\r\n        let a1 = p0.multiply2f(t1, t1);\r\n        let a2 = p1.multiply2f(t2, t2);\r\n        let a3 = p2.multiply2f(t3, t3);\r\n        let a2t = a2.add(a3).clone();\r\n        let a1t = a1.add(a2t).clone();\r\n        return a1t;\r\n    }\r\n\r\n    //---------------------------------工具封装-----------------------------------------------------------\r\n    \r\n    /**获得新的笔刷 */\r\n    public GetNewPaint() {\r\n        let node = new Node();\r\n        this.node.addChild(node);\r\n        node.layer = Layers.Enum.UI_2D;\r\n        let g = node.addComponent(Graphics);\r\n\r\n        return g;\r\n    }\r\n    \r\n    /**\r\n     * 控制number在min和max之间\r\n     * @param min {number}\r\n     * @param number {number}\r\n     * @param max {number}\r\n     */\r\n    public limt(min: number, number: number, max: number) {\r\n        return Math.min(Math.max(min, number), max);\r\n    }\r\n\r\n    onDestroy() {\r\n        this.unscheduleAllCallbacks(); // 销毁所有定时器\r\n    }\r\n}"]}