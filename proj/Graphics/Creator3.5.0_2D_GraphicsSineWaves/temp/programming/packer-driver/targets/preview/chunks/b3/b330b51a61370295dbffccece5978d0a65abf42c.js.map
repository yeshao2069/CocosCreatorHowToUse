{"version":3,"sources":["file:///Users/mu/work/gitee/cocos-creator-how-to-use/proj/Graphics/Creator3.5.0_2D_GraphicsSineWaves/assets/script/Wave.ts"],"names":["CEase","CWaves","_decorator","Color","CCFloat","ccclass","property","PI180","Math","PI","PI2","HALFPI","Ease","name","callback","percent","amplitude","sin","EaseEnumOptis","getInstance","Waves","x","isNaN","sign","floor","sawtooth","abs","WavesEnumOptis","Wave","type","tooltip"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Color, CCFloat, Enum, BitMask } from 'cc';\nconst { ccclass, property } = _decorator;\n\nvar PI180 = Math.PI / 180;\nvar PI2 = Math.PI * 2;\nvar HALFPI = Math.PI / 2;\n\n\n/**\n * This holds all of the easing objects and can be added to by the user\n *\n * @type    {Object}\n */\nvar Ease = [\n    /**\n     * Do not apply any easing\n     *\n     * @param  {Number} percent   where in the line are we?\n     * @param  {Number} amplitude the current strength\n     *\n     * @return {Number}           the new strength\n     */\n    {\n        name : 'linear',\n        callback : function(percent: number, amplitude: number) {\n            return amplitude;\n        }\n    },\n    /**\n     * Easing function to control how string each wave is from\n     * left to right\n     *\n     * @param  {Number} percent   where in the line are we?\n     * @param  {Number} amplitude the current strength\n     *\n     * @return {Number}           the new strength\n     */\n    {\n        name : 'sinein',\n        callback : function(percent: number, amplitude: number) {\n            return amplitude * (Math.sin(percent * Math.PI - HALFPI) + 1) * 0.5;\n        }\n    },\n    /**\n     * Easing function to control how string each wave is from\n     * left to right\n     *\n     * @param  {Number} percent   where in the line are we?\n     * @param  {Number} amplitude the current strength\n     *\n     * @return {Number}           the new strength\n     */\n    {\n        name : 'sineout',\n        callback : function(percent: number, amplitude: number) {\n            return amplitude * (Math.sin(percent * Math.PI + HALFPI) + 1) * 0.5;\n        }\n    },\n    /**\n     * Easing function to control how string each wave is from\n     * left to right\n     *\n     * @param  {Number} percent   where in the line are we?\n     * @param  {Number} amplitude the current strength\n     *\n     * @return {Number}           the new strength\n     */\n    {\n        name : 'sineinout',\n        callback : function(percent: number, amplitude: number) {\n            return amplitude * (Math.sin(percent * PI2 - HALFPI) + 1) * 0.5;\n        }\n    }\n];\n\nexport enum EaseEnumOptis {\n    linear = 0,\n    sinein = 1,\n    sineout = 2,\n    sineinout = 3,\n}\n\nexport class CEase {\n    public static getInstance () {\n        return Ease;\n    }\n}\n\n/**\n * Holds the different types of waves\n *\n * @type    {Object}\n */\nvar Waves = [\n    /**\n     * Default Sine Waves\n     *\n     * @param    {Number}    x\n     */\n    {\n        name : 'sine',\n        callback : function(x: number) {\n            return Math.sin(x);\n        }\n    },\n    /**\n     * Sign polyfill\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n     *\n     * @param     {Number}    x\n     *\n     * @return    {Number}\n     */\n    {\n        name : 'sign',\n        callback : function(x: number) {\n            x = +x; // convert to a number\n            if (x === 0 || isNaN(x)) {\n                return x;\n            }\n            return x > 0 ? 1 : -1;\n        }\n    },\n    /**\n     * Square Waves\n     *\n     * @param    {Number}    x\n     */\n    {\n        name : 'square',\n        callback : function(x: number) {\n            function sign(x: number) {\n                x = +x; // convert to a number\n                if (x === 0 || isNaN(x)) {\n                    return x;\n                }\n                return x > 0 ? 1 : -1;\n            }\n            return sign(Math.sin(x * PI2));\n        }\n    },\n    /**\n     * Sawtooth Waves\n     *\n     * @param    {Number}    x\n     */\n    {\n        name : 'sawtooth',\n        callback : function(x: number) {\n            return (x - Math.floor(x + 0.5)) * 2;\n        }\n    },\n\n    {\n        name : 'triangle',\n        callback : function(x: number) {\n            function sawtooth(x: number) {\n                return (x - Math.floor(x + 0.5)) * 2;\n            }\n            return Math.abs(sawtooth(x));\n        }\n    },\n];\n\nexport class CWaves {\n    public static getInstance () {\n        return Waves;\n    }\n}\n\nexport enum WavesEnumOptis {\n    sine = 0,\n    sign = 1,\n    square = 2,\n    sawtooth = 3,\n    triangle = 4,\n}\n\n@ccclass('Wave')\nexport class Wave {\n    @property(CCFloat)\n    timeModifier: number = 1;\n    @property(CCFloat)\n    amplitude: number = 50;\n    @property(CCFloat)\n    wavelength: number = 50;\n    @property(CCFloat)\n    segmentLength: number = 10;\n    @property(CCFloat)\n    lineWidth: number = 1;\n\n    // @property({ type: BitMask(WavesEnumOptis)})\n    // waveType: WavesEnumOptis = WavesEnumOptis.sine;\n    // @property({ type: BitMask(EaseEnumOptis)})\n    // easeType: EaseEnumOptis = EaseEnumOptis.sinein;\n\n    // 由于3.0.0版本, 掩码有问题，所以直接设置为数字\n    @property({ type:CCFloat, tooltip: ' 0: sine \\n 1: sign \\n 2: square \\n 3: sawtppth \\n 4: triangle'})\n    waveType: number = 0;\n    @property({ type:CCFloat, tooltip: ' 0: linear \\n 1: sinein \\n 2: sineout \\n 3: sineinout'})\n    easeType: number = 1;\n\n    @property(Color)\n    strokeColor: Color = new Color(255, 255, 255, 100);\n}\n"]}